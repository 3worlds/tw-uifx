<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.8.dev">
<meta name="author" content="Jacques Gignoux, Ian D. Davies, Shayne R. Flint">
<title>3Worlds user manual</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>3Worlds user manual</h1>
<div class="details">
<span id="author" class="author">Jacques Gignoux</span><br>
<span id="email" class="email"><a href="mailto:jacques.gignoux@upmc.fr">jacques.gignoux@upmc.fr</a></span><br>
<span id="author2" class="author">Ian D. Davies</span><br>
<span id="email2" class="email"><a href="mailto:ian.davies@anu.edu.au">ian.davies@anu.edu.au</a></span><br>
<span id="author3" class="author">Shayne R. Flint</span><br>
<span id="email3" class="email"><a href="mailto:shayne.flint@anu.edu.au">shayne.flint@anu.edu.au</a></span><br>
<span id="revnumber">version 1.2,</span>
<span id="revdate">10 February 2021</span>
<br><span id="revremark"></span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#truepurpose-and-motivation">1. Purpose and motivation</a>
<ul class="sectlevel2">
<li><a href="#truewhy-another-simulation-environment-for-ecology">1.1. Why another simulation environment for ecology?</a></li>
<li><a href="#truedesign-concepts">1.2. Design Concepts</a>
<ul class="sectlevel3">
<li><a href="#trueindividual-based-models">1.2.1. Individual based models</a></li>
<li><a href="#truethe-complex-system-as-a-dynamic-graph">1.2.2. The complex system as a dynamic graph</a></li>
<li><a href="#truecategories">1.2.3. Categories</a></li>
<li><a href="#truetime-with-simultaneous-events">1.2.4. Time with simultaneous events</a></li>
<li><a href="#truespace-as-a-mediator-for-interactions">1.2.5. Space as a mediator for interactions</a></li>
<li><a href="#truemodelling-made-easy">1.2.6. Modelling made easy</a></li>
<li><a href="#truemodel-comparison-graphs-can-be-compared">1.2.7. Model comparison: graphs can be compared</a></li>
<li><a href="#trueproblem-upscaling">1.2.8. Problem upscaling</a></li>
<li><a href="#trueportability-and-performance">1.2.9. Portability and performance</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#truegetting-started-download-and-installation">2. Getting started - download and installation</a>
<ul class="sectlevel2">
<li><a href="#truebasics-what-you-must-know-before-starting">2.1. Basics - what you must know before starting</a></li>
<li><a href="#trueprerequisites">2.2. Prerequisites</a></li>
<li><a href="#truerunning-modelmaker">2.3. Running ModelMaker</a></li>
<li><a href="#truesetting-up-a-java-development-environment-for-the-user-code">2.4. Setting up a java development environment for the user code</a>
<ul class="sectlevel3">
<li><a href="#truesetting-up-an-eclipse-integrated-development-environment-ide-for-3worlds">2.4.1. Setting up an eclipse <em>i</em>ntegrated <em>d</em>evelopment <em>e</em>nvironment (IDE) for 3Worlds</a></li>
<li><a href="#truerunning-modelmaker-from-eclipse">2.4.2. Running ModelMaker from eclipse</a></li>
<li><a href="#truelinking-user-code-with-model-configuration">2.4.3. Linking user code with model configuration</a></li>
<li><a href="#truedebugging-and-testing-user-code">2.4.4. Debugging and testing user code</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#truemodelmaker-reference-creating-and-editing-a-model">3. ModelMaker reference: creating and editing a model</a>
<ul class="sectlevel2">
<li><a href="#truegeneral-concepts-structure-of-a-3worlds-configuration">3.1. General concepts: structure of a 3Worlds configuration</a>
<ul class="sectlevel3">
<li><a href="#truea-tree-structure">3.1.1. A tree structure&#8230;&#8203;</a></li>
<li><a href="#truewith-cross-links">3.1.2. &#8230;&#8203;with cross-links</a></li>
<li><a href="#truewhat-modelmaker-does-for-you">3.1.3. What ModelMaker does for you</a></li>
</ul>
</li>
<li><a href="#trueusing-modelmaker-software-interface-and-functioning">3.2. Using ModelMaker: software interface and functioning</a></li>
<li><a href="#trueconfiguration-options-reference">3.3. Configuration options: reference</a>
<ul class="sectlevel3">
<li><a href="#truethe-3worlds-node">3.3.1. The <em>3Worlds</em> node</a></li>
<li><a href="#truethe-system-node">3.3.2. The <em>system</em> node</a></li>
<li><a href="#truethe-systemstructure-node">3.3.3. The <em>system/structure</em> node</a></li>
<li><a href="#truethe-systemdynamics-node">3.3.4. The <em>system/dynamics</em> node</a></li>
<li><a href="#truethe-codesource-node">3.3.5. The <em>codeSource</em> node</a></li>
<li><a href="#truethe-dataio-node">3.3.6. The <em>dataIO</em> node</a></li>
<li><a href="#truethe-experiment-node">3.3.7. The <em>experiment</em> node</a></li>
<li><a href="#truethe-userinterface-node">3.3.8. The <em>userInterface</em> node</a></li>
<li><a href="#truethe-hardware-node">3.3.9. The <em>hardware</em> node</a></li>
</ul>
</li>
<li><a href="#truedeveloping-and-testing-model-code">3.4. Developing and testing model code</a>
<ul class="sectlevel3">
<li><a href="#truegeneric-method-arguments">3.4.1. generic method arguments</a></li>
<li><a href="#truegeneric-method-fields">3.4.2. generic method fields</a></li>
</ul>
</li>
<li><a href="#truefeeding-the-model-with-data">3.5. Feeding the model with data</a></li>
</ul>
</li>
<li><a href="#truemodelrunner-reference-running-a-simulation-experiment">4. ModelRunner reference: running a simulation experiment</a>
<ul class="sectlevel2">
<li><a href="#truegeneral-concepts">4.1. General concepts</a></li>
<li><a href="#trueusing-modelrunner-software-interface-and-functioning">4.2. Using ModelRunner: software interface and functioning</a></li>
<li><a href="#truegetting-output-from-a-simulation-experiment">4.3. Getting output from a simulation experiment</a></li>
</ul>
</li>
<li><a href="#truesample-models-and-tutorials">5. Sample models and tutorials</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>by <strong>Jacques Gignoux</strong>, <strong>Ian D. Davies</strong> &amp; <strong>Shayne R. Flint</strong></p>
</div>
<div class="paragraph">
<p>Version: <strong>1.2</strong> (10 February 2021)</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="truepurpose-and-motivation"><a class="anchor" href="#truepurpose-and-motivation"></a>1. Purpose and motivation</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="truewhy-another-simulation-environment-for-ecology"><a class="anchor" href="#truewhy-another-simulation-environment-for-ecology"></a>1.1. Why another simulation environment for ecology?</h3>
<div class="paragraph">
<p><em>“Though the organisms may claim our primary interest, when we are trying to think fundamentally we cannot separate them from their special environment, with which they form
one physical system”</em> A. G. Tanlsey (1935).</p>
</div>
<div class="paragraph">
<p>Ecosystems, as first proposed by Arthur Tansley (1935), have both <em>physical</em> and <em>biological</em> aspects. They comprise
not only energy and chemical stocks and flows but also living things that are born, reproduce and die, exhibiting
particular behaviours over the course of their existence. They are made from and return to the physical world
(dust to dust, ashes to ashes), are part of it and at one and the same time, they constitute an entire new world
where concepts such as reproduction, social interaction, communication, life cycle, but also death, dominate
the game. To this day, reconciling these two aspects remains a key problem in ecosystem
studies: How does an energy flux translate into a number of living individuals or in a higher biodiversity?
How does a particular reproduction strategy affect river hydrology and the regional water budget (e.g. the beaver)?
How do social interactions affect the frequency of hurricanes (e.g. climate change)?
<strong>3Worlds</strong> aims at providing <em>a tool for building simulations that couple the physical and biologial aspects of ecosystems</em>.
Existing tools are either (1) focusing on the physics (e.g. dynamic models based on differential equations) and can
only represent reproduction and growth with metaphors for continuous physical quantities (e.g. matrix population
models); or (2) focusing on the biology (e.g. multi-agent systems describing social interactions in detail but posing
difficulties to balance a mass or energy budget).</p>
</div>
<div class="paragraph">
<p>In addition to this physical and biological duality, ecosystems are '<em>multi-scale</em>' (cf. an extensive discussion on
this topic and other questions related to the ecosystem concept in Gignoux et al. 2011). The ecosystem definition
applies equally well to the whole biosphere as to a single bacteria in a drop of water. Currently, there is no
software enabling one to consider ecosystems at such different spatial and temporal scales within the same
conceptual framework. A second aim of <strong>3Worlds</strong> is to fill this gap. If the ecosystem concept is robust enough, and
we believe it is given its success in ecology and its spread in other scientific fields, then it should be possible
to design a conceptually sound and consistent computing framework to deal with a multiplicity of scales.</p>
</div>
<div class="paragraph">
<p>Changing the scale of a model is not only a matter of space and time resolution relative to an order of magnitude.
It also involves the level of detail of the representations used in the model, something which has been formalized
in <em>abstraction theory</em> (Zucker 2003): the more detail there is in a model, the less abstract it is. At what
 level of detail should we model our system to capture its important behaviour? How does changing scale (in the
 broadest sense) effect model outcomes? There is no general answer to this question. This makes the possibility
 to test and compare different representations of the same system at different scales a must-have feature of
 any software dealing with ecosystems. <strong>3Worlds</strong> provides <em>a maximal flexibility in ecosystem representation</em>
 enabling to represent <em>any</em> ecosystem at <em>any</em> spatial and temporal scale with <em>any</em> level of detail&#8201;&#8212;&#8201;all this being set by
 the end-user in accordance with the purpose of their study. The end-user has full control on the detailed biological functions
and variables relevant to their problem.</p>
</div>
<div class="paragraph">
<p>How is this compatible with the strong conceptual backbone to build required by the previous demand for easy change
between scales? <strong>3Worlds</strong> uses <em>aspect-oriented thinking (AOT)</em> (Flint 2006), a method to build complex systems (e.g.
software) from independent areas of knowledge. We have designed an <em>archetype</em> of what we believe constitutes an
ecosystem&#8201;&#8212;&#8201;a recursive and multi-scale system of interacting entities. We use an implementation of AOT to make sure
that any user-defined representation of an ecosystem complies with the archetype. This guarantees that, despite a
great freedom left to the end-user, their model will always be compatible with the 3Worlds software. The great
benefit of this is that while we believe it’s possible to construct any type of
model within this archetype, imposing specification constraints greatly assists in model comparison: why should
two models, ostensibly constructed for the same purpose, differ in their outputs? How does a change in temporal
or spatial scale affect projections?  How does adding or removing sub-systems change model projections?
<em>Models developed in <strong>3Worlds</strong> are always comparable</em>, different to what usually
happens in large model intercomparison exercises.</p>
</div>
<div class="paragraph">
<p>The ecosystem is a recursive concept (Gignoux et al. 2011): ecosystems can be nested. Parts of an ecosystem can
be studied as ecosystems themselves. We use the concept of a hierarchical system, formalized as a graph (Gignoux et
al. 2017) to implement this idea. In <strong>3Worlds</strong>, <em>the modelled ecosystem is a graph</em> where nodes represent relevant
entities: individuals, populations, climate, soil, area, &#8230;&#8203;; and edges represent relations between these entities.
These relations can be of any kind, including a hierarchical relation describing the complex nesting of sub-systems.
This provides an elegant solution to the apparent complexity of ecosystems: it allows for various types of <em>emergence</em>,
enables the comparison of system structures and simulation trajectories, and can represent virtually anything
an ecological modeller can dream of.</p>
</div>
<div class="paragraph">
<p>How is this possible in one single software? Well, <strong>3Worlds</strong> builds upon more than thirty years of experience of
its developers in ecosystem and complex system modelling and simulation. Over this time, we reached the conclusion that (1) robust concepts
are fundamental for building sound software, (2) some problems that appear over and over again in the life of a
simulation modellers often have well-established solutions, sometimes in other scientific fields, (3) complex
systems are not <em>that</em> complex once properly designed. Things are just
available around here, it&#8217;s just a matter of making them work together, and <strong>3Worlds</strong> is our best try to do so!</p>
</div>
</div>
<div class="sect2">
<h3 id="truedesign-concepts"><a class="anchor" href="#truedesign-concepts"></a>1.2. Design Concepts</h3>
<div class="paragraph">
<p>3Worlds is based on a few concepts and techniques that have a very broad application and harnesses them to fit the needs of ecosystem modelling.</p>
</div>
<div class="sect3">
<h4 id="trueindividual-based-models"><a class="anchor" href="#trueindividual-based-models"></a>1.2.1. Individual based models</h4>
<div class="paragraph">
<p>Fundamentally, <strong>3Worlds</strong> is designed as a framework for <em>individual-based models</em> (IBMs: Grimm &amp; Railsback 2005). IBMs, like multi-agent systems (MASs: Bousquet &amp; Lepage 2004), assume that some important properties of complex systems (like ecosystems and human societies) cannot be understood without representing the detailed behaviour of every individual in the system. In an IBM, a list of 'individuals' (called 'agents' in MASs) is kept in memory, and their interactions through various functions yield the dynamics of the whole system over time. Individuals can come and go, which means that their list is constantly changing in size.</p>
</div>
<div class="paragraph">
<p>3Worlds simulates a <em>system</em> made of interacting <em>system components</em>, which are equivalent to the individuals or agents of IBMs and MASs. If required by a simple application, the 3Worlds <em>system</em> can be reduced to zero component, just as in any system dynamics application; but this is not the use 3Worlds has been designed for, and other more specialised software may be more adapted for this use case.</p>
</div>
</div>
<div class="sect3">
<h4 id="truethe-complex-system-as-a-dynamic-graph"><a class="anchor" href="#truethe-complex-system-as-a-dynamic-graph"></a>1.2.2. The complex system as a dynamic graph</h4>
<div class="paragraph">
<p>Ecosystems are commonly considered as <em>complex systems</em>, without much agreement on what this latter concept means. Complex systems are usually supposed to possess <em>emergent properties</em>; again, with little agreement on what this means. We argued in Gignoux et al. (2017) that the only common feature of all definitions of emergence is that emergence can only appear in systems with a 'macro-state' and 'micro-states'. We called such systems <em>hierarchical systems</em> and assumed that they coud be ideally represented with a <em>dynamic graph</em>.</p>
</div>
<div class="paragraph">
<p>According to <a href="https://en.wikipedia.org/wiki/Graph_theory">graph theory</a>, a <em>graph</em> is a mathematical object comprising a set of <em>nodes</em>, a set of <em>edges</em> linking these nodes according to an <em>incidence function</em> (<a href="#fig-what-is-a-graph">Fig. 1</a>). A <em>dynamic</em> graph (Harary &amp; Gupta 1997) is a graph where these three components (the sets of nodes, edges, and the incidence function) can change over time.</p>
</div>
<div id="fig-what-is-a-graph" class="imageblock text-center">
<div class="content">
<img src="graph.svg" alt="graph">
</div>
<div class="title">Figure 1. A mathematical graph, showing both the usual mathematical terms and the vocabulary used in 3Worlds. The incidence function is the particular pattern of which node is related to which one. Edges can be directed (with arrows) or undirected.</div>
</div>
<div class="paragraph">
<p>If we allow to attach <em>descriptors</em> (e.g. numbers with a specific meaning: <a href="#fig-graph-descriptors">Fig. 2</a>) to nodes and edges, we can use the graph nodes as the individuals of our IBM, and the graph edges give a concrete existence to the interactions between those nodes. If we define <em>functions</em> that can modify nodes and edges and their descriptors, we are able to make our graph dynamic. A 3Worlds simulation runs a dynamic graph where nodes, edges, descriptors, functions can be adapted to user needs for their particular application. Nodes are called <em>system components</em>, edges <em>system relations</em>, and descriptors <em>properties</em>.</p>
</div>
<div id="fig-graph-descriptors" class="imageblock text-"center">
<div class="content">
<img src="graph-with-descriptors.svg" alt="graph with descriptors">
</div>
<div class="title">Figure 2. An example of graph descrpitors (redrawn from Gignoux et al. 2017).</div>
</div>
</div>
<div class="sect3">
<h4 id="truecategories"><a class="anchor" href="#truecategories"></a>1.2.3. Categories</h4>
<div class="paragraph">
<p>In an IBM, every individual is different from all others. But it is common practice to assume that some groups of individuals share some common particularities. This is the essence of modelling: finding commonalities within an ocean of particular cases. We use the concetp of <em>category</em> to group system components that 'look like each other' in some way. Categories are used to express how alike and how different certain groups of components are from each other.</p>
</div>
<div class="paragraph">
<p>Within the dynamic graph context, categories are used to specify common descriptors to groups of components (e.g. a plant species average growth rate, an animal cohort survival rate, &#8230;&#8203;) and functions that operate on a group of component of the same category. They are also used to specify which <em>type of relation</em> is possible between components of diffent categories.</p>
</div>
<div class="paragraph">
<p>Th category concept use here is very close to the class concept used in the <a href="http://uml.org/what-is-uml.htm">UML</a> language and in  <a href="https://en.wikipedia.org/wiki/Object-oriented_programming">object oriented programming</a> . Categories can be nested, and can be exclusive of each other or not. They are central to the organisation and execution of a simulation in 3Worlds.</p>
</div>
</div>
<div class="sect3">
<h4 id="truetime-with-simultaneous-events"><a class="anchor" href="#truetime-with-simultaneous-events"></a>1.2.4. Time with simultaneous events</h4>
<div class="paragraph">
<p>Ecosystems are both biological and physical systems. They do not only deal with individuals and populations of living organisms, but also with fluxes of matter and energy. To properly compute a mass or energy balance typical of physical questions, we need a time model that insures that all system components are modified synchronously - otherwise, leaks in mass and energy budgets may occur (<a href="#fig-3w-main-loop">Fig. 3</a>). This is where IBMs somewhat differ from MASs in their most common current implementations: MASs emphasize the <em>autonomy</em> of agents by allowing them to modify their state immediately. In other words, MASs assume that no two events occurring in a simulation can be simultaneous, while mass/energy balance requires simultaneity of events. 3Worlds assumes that simultaneous events are the rule as its default, but by using particular time models it is possible to relax this constraint.</p>
</div>
<div id="fig-3w-main-loop" class="imageblock text-center">
<div class="content">
<img src="state-change-loop.svg" alt="state change loop">
</div>
<div class="title">Figure 3. The time model of 3Worlds. The overall dynamics of a system is computed as X(t+dt) = f(X(t)) where X represents the state of all system components, t is time and f is the function (or rather, the set of functions) used to compute the change over the time interval dt.</div>
</div>
<div class="paragraph">
<p>Given the diversity of topics subject to ecological modelling, ecological processes span many orders of magnitude in their rate of action. Demographic models often use a yearly time step, while ecophysiological models may use daily time steps and physiological models may run with time steps of a second. 3Worlds provides three types of <em>time model</em> that can be used in interaction: '<em>clock</em>' models using a constant time step, <em>event-driven </em>time models where time events trigger computations that can generate further events in the future, and <em>scenarios</em> where the list of events where computations are to be made is user-prescribed. Time steps span the whole scale of time units possibly relevant to ecology, i.e. from milliseconds to millenia. Standard Gregorian calendar time can also be used.</p>
</div>
</div>
<div class="sect3">
<h4 id="truespace-as-a-mediator-for-interactions"><a class="anchor" href="#truespace-as-a-mediator-for-interactions"></a>1.2.5. Space as a mediator for interactions</h4>
<div class="paragraph">
<p>IBMs are often 'spatialized', which means they include some representation of the physical space in which organisms of an ecosystem interact. We argued in Gignoux et al. (2011) that space is not a requirement of the ecosystem definition, but rather an optional feature. Besides the usual 3-dimensional space everyone is familiar with, we called the place where organims interact in an ecosystem the <em>arena</em>, ie the place where things happen and where a public (of ecological modellers) is watching them. This does not mean an Euclidian (or any other kind of) space must be attached to the ecosystem representation. Using a dynamic graph is sufficient.</p>
</div>
<div class="paragraph">
<p>However, it appears that in numerous cases explicitly considering space in a model helps computing ecological interactions. In most ecological process models, there are actually implicit assumptions about space and how it affects organism interactions. For example, seed dispersal in plants is easily computed in a 2-dimensional space where the location of seeds depends on that of parent plants and some simple decreasing with distance distribution law; water flows in a water catchment rely on a 2 dimensional space plus an elevation of ground surface to some x and y resolution; competition between individual trees in a forest assume a vertical distribution of leaves that can be more or less elaborate.</p>
</div>
<div class="paragraph">
<p>Following Gignoux et al. (2011), we optionally provide predefined spatial representations to include in a simulator. Different spaces can be used within a single simulator, depending on the needs of the process computations. They are associated with optimal item search algorithms (e.g. Kd-trees) that speed up the search of components between which to establish relations.</p>
</div>
</div>
<div class="sect3">
<h4 id="truemodelling-made-easy"><a class="anchor" href="#truemodelling-made-easy"></a>1.2.6. Modelling made easy</h4>
<div class="paragraph">
<p>The community of ecological scientists has been developing an impressively high number of models, yet most of them are poorly designed in terms of programming, as ecologists are not software engineers. Ecosystem simulators are among the most complex existing programs (Coquillard &amp; Hill 1997). They require high programming skills and constitute a huge investment in time, which makes their production slow and hazardous. As a result, they tend to be used beyond their initial domain of application once build (e.g. the overuse and abuse of the CENTURY model: Parton et al. 1988), issues of provenance and repeatability are rarely addressed, shedding some doubt on the discipline as a whole.</p>
</div>
<div class="paragraph">
<p>With 3Worlds we wanted to provide a simulation platform for ecosystem modelling using state-of-the-art concepts and algorithms, and sound programing techniques (e.g. systematic code testing, separated concerns), so that ecological modellers can concentrate on the ecological part of the problem and forget about the computer science part. We used <em>automatic code generation</em> to ensure that end-users only have to write one code file to build a simulator for their particular problem. We used a <em>graph editor</em> to build the configuration and organise the data required for a particular use case. In 3Worlds, an ecosystem model only requires two files: a specification file organised as a graph, and a computer code file where all relevant ecological processes are written.</p>
</div>
<div class="paragraph">
<p>When designing a model, it is important to get a quick visual feedback of how the system behaves when one changes equations or their implementation. 3Worlds comes with a library of user-interface objects (graphs, maps, time series) that can be freely assembled to adapt outputs to user needs.</p>
</div>
</div>
<div class="sect3">
<h4 id="truemodel-comparison-graphs-can-be-compared"><a class="anchor" href="#truemodel-comparison-graphs-can-be-compared"></a>1.2.7. Model comparison: graphs can be compared</h4>
<div class="paragraph">
<p>Climate change modelling relies on 19 major general circulation models (GCMs) all based on the same equations. When run with identical datasets (initial data plus forcings), they al yield different results. This is expected given the size of their code, but what is appalling is that nobody is able to trace within the code where the differences come from  (Lim &amp; Roderick 2009). This problem arises again and again in the modelling literature (e.g. Melilo et al. 1995; Roxburgh et al. 2004). The ultimate reason for this impossibility is that all the knowledge invested into these huge models takes the form of computer codes, which are very difficult to compare above a ridiculously small code size.</p>
</div>
<div class="paragraph">
<p>3Worlds is an attempt to solve this issue <em>in the future</em> (there is nothing we can do for past model codes). If models are developed within the standard framework of 3Worlds, the only thing that needs to be compared among models is their specification file (a graph) and their code file - hundreds to thousands of lines, not more. Everything else is equal. In theory this should facilitate model comparison.</p>
</div>
</div>
<div class="sect3">
<h4 id="trueproblem-upscaling"><a class="anchor" href="#trueproblem-upscaling"></a>1.2.8. Problem upscaling</h4>
<div class="paragraph">
<p>Developing a simulator is only a small part of the ecological modelling exercise: once the siulator is ready, it is used as a real ecosystem in <em>simulation experiments</em>. Designing and running such experiments is a very important part of the job - if not the most important, as it is the one which will produce ecologicallly relevant, publishable results.</p>
</div>
<div class="paragraph">
<p>IBMs are most of the time stochastic, as population rates translate into probabiities at the individual level: e.g., the code has to decide which individuals to delete to satisfy a mortality rate of 10%. This is usually based on random number drawings. A a result, every simulation is different even when using identical parameters, and an asymptotic behaviour of the system can only be obtained by running multiple simulations. Fortunately, this is easily parallelized with modern computers.</p>
</div>
<div class="paragraph">
<p>3Worlds is interfaced with <a href="https://openmole.org/">OpenMole</a>  to provide access to big computing power. Through OpenMole, big simulation experiments can be deployed on networks of computers, grids, or supercalculators.</p>
</div>
</div>
<div class="sect3">
<h4 id="trueportability-and-performance"><a class="anchor" href="#trueportability-and-performance"></a>1.2.9. Portability and performance</h4>
<div class="paragraph">
<p>3Worlds is written in java to ensure portability between all operating systems. Its code has been carefully optimised, although genericity comes at some performance cost compared to specialisation.</p>
</div>
<div class="paragraph">
<p><strong>Cited references:</strong></p>
</div>
<div class="paragraph">
<p>Bousquet, F., &amp; Le Page, C. (2004). Multi-agent simulations and ecosystem management: a review. <em>Ecological Modelling</em>, 176:313–332. <a href="https://doi.org/10.1016/j.ecolmodel.2004.01.011" class="bare">https://doi.org/10.1016/j.ecolmodel.2004.01.011</a></p>
</div>
<div class="paragraph">
<p>Coquillard, P., &amp; Hill, D. (1997). <em>Modélisation et simulation d’écosystèmes. Des modèles déterministes aux simulations à événements discrets</em>. Masson, Paris.</p>
</div>
<div class="paragraph">
<p>Flint, S. R. (2006). <em>Aspect-Oriented Thinking - An approach to bridging the disciplinary divides</em>. PhD, Australian National University.</p>
</div>
<div class="paragraph">
<p>Gignoux, J., I.D. Davies, S.R. Flint, &amp; J.D. Zucker (2011). The Ecosystem in Practice: Interest and
Problems of an Old Definition for Constructing Ecological Models. <em>Ecosystems</em> 14: 1039‑54. <a href="https://doi.org/10.1007/s10021-011-9466-2" class="bare">https://doi.org/10.1007/s10021-011-9466-2</a>.</p>
</div>
<div class="paragraph">
<p>Gignoux, J., G. Chérel, I.D. Davies, S.R. Flint, &amp; E. Lateltin (2017). Emergence and Complex Systems: The
Contribution of Dynamic Graph Theory. <em>Ecological Complexity</em> 31: 34‑49. <a href="https://doi.org/10.1016/j.ecocom.2017.02.006" class="bare">https://doi.org/10.1016/j.ecocom.2017.02.006</a>.</p>
</div>
<div class="paragraph">
<p>Grimm, V., &amp; Railsback, S. (2005). <em>Individual-based modelling and ecology</em>. Princeton University Press.</p>
</div>
<div class="paragraph">
<p>Harary, F., &amp; Gupta, G. (1997). Dynamic graph models. <em>Mathematical and Computer Modelling</em>, 25(7), 79–87. <a href="https://doi.org/10.1016/S0895-7177(97)00050-2" class="bare">https://doi.org/10.1016/S0895-7177(97)00050-2</a></p>
</div>
<div class="paragraph">
<p>Lim, W. H., &amp; Roderick, M. L. (2009). <em>An atlas of the global water cycle based on the IPCC AR4 climate models.</em> ANU E Press.</p>
</div>
<div class="paragraph">
<p>Melilo, J. M., Borchers, J., Chaney, J., Fisher, H., Fox, S., Haxeltine, A., Janetos, A., Kicklighter, D. C., Kittel, T. G. F., McGuire, A. D., McKeown, R., Neilson, R., Nemani, R., Ojima, D. S., Painter, T., Pan, Y., Parton, W. J., Pierce, L., Pitelka, L., … Woodward, F. I. (1995). Vegetation/ecosystem modeling and analysis project: comparing biogeography and biogeochemistry models in a continental-scale study of terrestrial ecosystem responses to climate change and CO<sub>2</sub> doubling. <em>Global Biogeochemical Cycles</em>, 9(4), 407–437.</p>
</div>
<div class="paragraph">
<p>Parton, W., Stewart, J., &amp; Cole, C. (1988). Dynamics of C,N, P and S in grassland soils: a model. <em>Biogeochemistry</em>, 5, 109–131.</p>
</div>
<div class="paragraph">
<p>Roxburgh, S. H., Barrett, D. J., Berry, S. L., Carter, J. O., Davies, I. D., Gifford, R. M., Kirschbaum, M. U. E., McBeth, B. P., Noble, I. R., Parton, W. G., Raupach, M. R., &amp; Roderick, M. L. (2004). A critical overview of model estimates of net primary productivity for the Australian continent. <em>Functional Plant Biology</em>, 31(11), 1043–1059.</p>
</div>
<div class="paragraph">
<p>Tansley, A G. (1935). The use and abuse of vegetational concepts and terms. <em>Ecology</em> 16: 284‑307.</p>
</div>
<div class="paragraph">
<p>Zucker, J.D. (2003). A Grounded Theory of Abstraction in Artificial Intelligence. <em>Philosophical Transactions of
the Royal Society B: Biological Sciences</em> 358: 1293‑1309. <a href="https://doi.org/10.1098/rstb.2003.1308" class="bare">https://doi.org/10.1098/rstb.2003.1308</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="truegetting-started-download-and-installation"><a class="anchor" href="#truegetting-started-download-and-installation"></a>2. Getting started - download and installation</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="truebasics-what-you-must-know-before-starting"><a class="anchor" href="#truebasics-what-you-must-know-before-starting"></a>2.1. Basics - what you must know before starting</h3>
<div class="paragraph">
<p>3Worlds is an application designed to develop and launch simulations of ecosystems.
It is highly versatile and can simulate any kind of ecosystem using any kind of mathematical logic.</p>
</div>
<div class="paragraph">
<p>The application and use of 3Worlds to a particular ecosystem for a particular study case is called a <em>model</em>&#8201;&#8212;&#8201;or, more precisely a <em>simulation</em> model.
The model must first be specified and developed (this involves writing some code in the java programming language) before it can be executed for a particular case study.
This execution is called a <em>simulation experiment</em>.</p>
</div>
<div class="paragraph">
<p>3Worlds comprises two main applications:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ModelMaker</code>, to configure a model;</p>
</li>
<li>
<p><code>ModelRunner</code>, to run the model.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Creating a model involves creating a configuration with <code>ModelMaker</code> and developing some associated java code to specify details particular to your model.
To do this, you must use the <a href="https://www.eclipse.org/downloads/">eclipse</a> programming software (freeware). Later versions of 3Worlds may support other packages, but at the time of writing, 3Worlds will only work with <a href="https://www.eclipse.org/downloads/">eclipse</a>.</p>
</div>
<div class="paragraph">
<p><code>ModelMaker</code> will generate java code for data structures specific to a model (based on the configuration file you have developed) and <em>template</em> java code for each process you have defined. These process templates are where you enter programming code to implement your model. You only need to write  code for your processes and for model initialisation. All else is managed by 3Worlds.</p>
</div>
<div class="paragraph">
<p>3Worlds is written in <a href="https://en.wikipedia.org/wiki/Java_(programming_language)">java</a>, which makes it OS-independent. It can be run on MacOS, Linux or Windows computers.</p>
</div>
</div>
<div class="sect2">
<h3 id="trueprerequisites"><a class="anchor" href="#trueprerequisites"></a>2.2. Prerequisites</h3>
<div class="paragraph">
<p>You must have the following software installed on your computer prior to install 3Worlds:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>java JDK (<strong>J</strong>ava <strong>D</strong>evelopment <strong>K</strong>it), version 11 or greater (<a href="https://www.oracle.com/technetwork/java/javase/downloads/jdk11-downloads-5066655.html">oracle</a> or <a href="http://openjdk.java.net/">open</a> version)</p>
</li>
<li>
<p>java fx (graphical user interface library for java: <a href="http://www.oracle.com/technetwork/java/javase/overview/javafx-overview-2158620.html">oracle</a> or <a href="http://openjdk.java.net/projects/openjfx/">open</a> version)</p>
</li>
<li>
<p>an <a href="https://www.eclipse.org/downloads/">eclipse</a> java code development environment. You must:</p>
<div class="ulist">
<ul>
<li>
<p>install <a href="https://www.eclipse.org/downloads/">eclipse</a></p>
</li>
<li>
<p>install the <a href="https://www.eclipse.org/efxclipse/install.html">e(fx)clipse plugin</a> required to use javafx</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="truerunning-modelmaker"><a class="anchor" href="#truerunning-modelmaker"></a>2.3. Running ModelMaker</h3>
<div class="paragraph">
<p>This assumes you have downloaded <code>3w.zip</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Unzip <code>3w.zip</code> in your user home directory (important), keeping the internal directory tree. This will extract a file <code>modelMaker.jar</code> and a <code>.3w</code> directory containing more jar files.</p>
</li>
<li>
<p>Double-click on <code>modelMaker.jar</code>. This should launch the ModelMaker application.</p>
</li>
<li>
<p>If this does not work, open a terminal and type <code>java -jar modelMaker.jar</code>. This should launch the ModelMaker application.</p>
</li>
</ol>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This way of launching 3Worlds is sensitive to the relative location of <code>modelMaker.jar</code> and the other jars that are in the <code>.3w</code> directory, ie <code>modelMaker.jar</code> <strong>must</strong> be exactly one directory above <code>.3w</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To remove this constraint, you can bypass <code>modelMaker.jar</code> by directly launching it from the jars contained in <code>.3w</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">java -cp .3w/tw-dep.jar au.edu.anu.twuifx.mm.Main</code></pre>
</div>
</div>
<div class="paragraph">
<p>The last is the preferred method as any errors that may arise will appear in the terminal window.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
to develop your model-specific code, you will need to setup a java development environment as shown in section <a href="#truesetting-up-a-java-development-environment-for-the-user-code">Setting up Java</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="truesetting-up-a-java-development-environment-for-the-user-code"><a class="anchor" href="#truesetting-up-a-java-development-environment-for-the-user-code"></a>2.4. Setting up a java development environment for the user code</h3>
<div class="sect3">
<h4 id="truesetting-up-an-eclipse-integrated-development-environment-ide-for-3worlds"><a class="anchor" href="#truesetting-up-an-eclipse-integrated-development-environment-ide-for-3worlds"></a>2.4.1. Setting up an eclipse <em>i</em>ntegrated <em>d</em>evelopment <em>e</em>nvironment (IDE) for 3Worlds</h4>
<div class="paragraph">
<p>This assumes you have downloaded <code>UserCodeRunner.java</code> and <code>tw-dep.jar</code>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If not yet done, install <a href="https://www.eclipse.org/downloads/">eclipse</a> (don&#8217;t forget <a href="https://www.eclipse.org/efxclipse/install.html">e(fx)clipse</a>!)</p>
</li>
<li>
<p>Create at <em>workspace</em> (= a working directory for eclipse - eclipse will ask for it when launched). e.g., <em>&lt;my_workspace&gt;</em></p>
</li>
<li>
<p>Within eclipse, create a <em>project</em>:</p>
<div class="ulist">
<ul>
<li>
<p>Select menu <code>File &#8594; New &#8594; Java project</code>; this opens a dialog box</p>
</li>
<li>
<p>In the dialog box, type a project name (e.g. <em>&lt;my_project&gt;</em>)</p>
</li>
<li>
<p>Click the <code>Finish</code> button</p>
</li>
</ul>
</div>
</li>
<li>
<p>Import <code>UserCodeRunner.java</code> in the project:</p>
<div class="ulist">
<ul>
<li>
<p>Select menu <code>File &#8594; Import</code>; this opens a dialog box</p>
</li>
<li>
<p>In the dialog box, select <code>general &gt; File System</code></p>
</li>
<li>
<p>Click the <code>next</code> button</p>
</li>
<li>
<p>Click on the <code>Browse</code> button to select the directory where <code>UserCodeRunner.java</code> is located</p>
</li>
<li>
<p>Select the proper file in the list</p>
</li>
<li>
<p>Select <code>/src</code> as the destination location in the project</p>
</li>
<li>
<p>Click the <code>Finish</code> button</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>UserCodeRunner.java</code> should now appear as the unique member of a <code>default</code> package, with a compile error message attached to it.</p>
</div>
</li>
<li>
<p>Update libraries required by the project:</p>
<div class="ulist">
<ul>
<li>
<p>Select menu <code>Project &#8594; Properties</code>; this opens a dialog box</p>
</li>
<li>
<p>In the dialog box, select <code>Java Build Path</code></p>
</li>
<li>
<p>Select the <code>Libraries</code> tab</p>
</li>
<li>
<p>Click on the <code>Add external JARs&#8230;&#8203;</code> button; this open a file selection dialog box</p>
</li>
<li>
<p>In the file selection dialog box, browse and select <code>tw-dep.jar</code></p>
</li>
<li>
<p>Click the <code>Apply and Close</code> button</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>UserCodeRunner.java</code> should now have no compile errors.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="truerunning-modelmaker-from-eclipse"><a class="anchor" href="#truerunning-modelmaker-from-eclipse"></a>2.4.2. Running ModelMaker from eclipse</h4>
<div class="paragraph">
<p>ModelMaker can be run as a standalone application, or from eclipse since it is included in the <code>tw-dep.jar</code> library required to develop the user code.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <code>package explorer</code> window, expand the <code>Referenced libraries</code> entry</p>
</li>
<li>
<p>Right-click on the <code>tw-dep.jar</code> entry, select <code>Run as &#8594; Java Application</code>. This opens a dialog box</p>
</li>
<li>
<p>In the dialog box, type <em>Main</em></p>
</li>
<li>
<p>In the list of matching items, select <code>Main - au.edu.anu.twuifx.mm</code> and click <code>OK</code></p>
</li>
<li>
<p>If a dialog box appears warning for errors, click <code>Proceed</code>. This launches the ModelMaker application</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="truelinking-user-code-with-model-configuration"><a class="anchor" href="#truelinking-user-code-with-model-configuration"></a>2.4.3. Linking user code with model configuration</h4>
<div class="paragraph">
<p>This requires the following actions:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In ModelMaker,</p>
<div class="ulist">
<ul>
<li>
<p>create or open a <em>3Worlds</em> project (<code>Projects</code> entry of the main menu)</p>
</li>
<li>
<p>select <code>Preferences &#8594; Java Project &#8594; Connect&#8230;&#8203;</code>. This opens a dialog box with a file selector</p>
</li>
<li>
<p>select the root directory of the <em>eclipse</em> project as created above (e.g. <em>&lt;my_workspace&gt;</em>/<em>&lt;my_project&gt;</em>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This operation tells <code>ModelMaker</code> to generate its code into the user java project.
When you want to edit your code in eclipse, you must first <strong>refresh</strong> the eclipse project:</p>
</div>
</li>
<li>
<p>In eclipse,</p>
<div class="ulist">
<ul>
<li>
<p>select the project name at the very top of the <code>package explorer</code> window</p>
</li>
<li>
<p>right-click on it and select <code>Refresh</code></p>
</li>
<li>
<p>or, alternatively: press the <strong>F5</strong> key</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You don&#8217;t <strong>have</strong> to do this. We provide it as a facility if you want to run ModelMaker from eclipse rather than directly for some profound reason of your own.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="truedebugging-and-testing-user-code"><a class="anchor" href="#truedebugging-and-testing-user-code"></a>2.4.4. Debugging and testing user code</h4>
<div class="paragraph">
<p>The user code, first generated by <code>ModelMaker</code> and further edited by the user, can be run using <code>UserCodeRunner.java</code>.
It requires two command line arguments (we assume that you know how to setup and run a <code>Run Configuration</code> in eclipse):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the name of the directory of the 3Worlds project as created by <code>ModelMaker</code> (e.g. <em>project_test_model9_2019-09-05-08-50-20-458</em>). This project directory is located under the <code>.3w</code> directory automatically created by <code>ModelMaker</code> as its working directory</p>
</li>
<li>
<p>the name of the model configuration file in this directory (e.g. <em>test_model_9.ugt</em>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>With this, the user code should be executed as a test simulation by <code>UserCodeRunner</code>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Further edits and modifications of the configuration can be made in <code>ModelMaker</code>, but do not forget to keep the eclipse project content synchronized with the ModelMaker project by refreshing the eclipse project as often as necessary.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="truemodelmaker-reference-creating-and-editing-a-model"><a class="anchor" href="#truemodelmaker-reference-creating-and-editing-a-model"></a>3. ModelMaker reference: creating and editing a model</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="truegeneral-concepts-structure-of-a-3worlds-configuration"><a class="anchor" href="#truegeneral-concepts-structure-of-a-3worlds-configuration"></a>3.1. General concepts: structure of a 3Worlds configuration</h3>
<div class="sect3">
<h4 id="truea-tree-structure"><a class="anchor" href="#truea-tree-structure"></a>3.1.1. A tree structure&#8230;&#8203;</h4>
<div class="paragraph">
<p>The configuration of a 3Worlds <em>simulation experiment</em> is organised as a tree (<em>cf.</em> <a href="#fig-configuration-tree">Figure 4</a>). Each tree <em>node</em> specifies a subset of the parameters of the whole configuration. Each <em>node</em> has <em>child nodes</em> linked through a <em>tree edge</em>, so that large pieces of configuration can be broken down into the relevant details. At each level of this hierarchy, <em>properties</em> can be attached to <em>nodes</em>.</p>
</div>
<div class="paragraph">
<p><em>Nodes</em> have a <em>label</em> and a <em>name</em> that are displayed in the <code>ModelMaker</code> interface as <code>label:name</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <em>label</em> specifies what role this particular <em>node</em> plays in the whole configuration. For example, the <em>node</em> labelled <code>experiment</code> is used to configure a <em>simulation experiment</em>.</p>
</li>
<li>
<p>The <em>name</em> is used to differentiate <em>nodes</em>. It must be unique over the whole configuration tree. By default, ModelMaker generates unique names (by adding a number to the name if replicates are found).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <em>root node</em> of a configuration is always labelled <code>3worlds</code>.</p>
</div>
<div id="fig-configuration-tree" class="imageblock text-center">
<div class="content">
<img src="dsl-tree2.svg" alt="dsl tree2">
</div>
<div class="title">Figure 4. Tree structure of a simulation experiment configuration in 3Worlds</div>
</div>
<div class="paragraph">
<p>The configuration tree is stored in a file in a specially designed text format, ending with the extension <code>.ugt</code> or <code>.twg</code>. Such files are produced by <code>ModelMaker</code> and can then be exchanged and imported into <code>ModelMaker</code> via the <code>Projects &#8594; Import&#8230;&#8203;</code> menu entry. Their format is human-readable, but they must <strong>never</strong> be edited with another software than <code>ModelMaker</code> - <strong>the risk is to corrupt all your configuration</strong> and be unable to run it (or even edit it with <code>ModelMaker</code> again).</p>
</div>
<div class="paragraph">
<p>Each node in the configuration has a particular meaning for <code>ModelRunner</code>: the configuration must comply with certain rules and constraints, the first one being the particular set of <em>nodes</em> that have been designed and appear on <a href="#fig-configuration-tree">Figure 4</a>. The detailed meaning of all <em>nodes</em> and their <em>properties</em> is described in section <a href="#truereference-of-3worlds-configuration">3Worlds reference</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="truewith-cross-links"><a class="anchor" href="#truewith-cross-links"></a>3.1.2. &#8230;&#8203;with cross-links</h4>
<div class="paragraph">
<p>Actually, the 3Worlds configuration is not stritcly hierarchical (<em>cf.</em> <a href="#fig-configuration-tree2">Figure 5</a>): according to their role in <code>ModelRunner</code>, some configuration <em>nodes</em> need to gather information from other parts of the configuration tree. This is done by allowing for some cross-reference <em>edges</em> to be defined, that overlay with the strict hierarchical structure of the tree. As a result fo these cross links, the whole configuration is a <em>graph</em> rather than a tree.</p>
</div>
<div id="fig-configuration-tree2" class="imageblock text-center">
<div class="content">
<img src="dsl-tree2links.svg" alt="dsl tree2links">
</div>
<div class="title">Figure 5. Tree structure of a simulation experiment configuration in 3Worlds, showing the cross-links between tree nodes</div>
</div>
<div class="paragraph">
<p><em>Edges</em> representing cross links have a <em>label</em>, <em>name</em>, and may have <em>properties</em> just as <em>nodes</em> do. The detailed meaning of all cross-reference <em>edges</em> and their <em>properties</em> is described in section <a href="#Configuration options: reference">[Configuration options: reference]</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="truewhat-modelmaker-does-for-you"><a class="anchor" href="#truewhat-modelmaker-does-for-you"></a>3.1.3. What ModelMaker does for you</h4>
<div class="paragraph">
<p><code>ModelMaker</code> knows the details of the configuration constraints. It facilitates the design of a configuration by only letting you add the <em>nodes</em>, <em>edges</em> and <em>properties</em> that will produce a valid, runnable configuration file. During the configuration building process, it constantly checks the validity of the graph and reports any errors or missing parts in its <code>log</code> panel. <code>ModelMaker</code> is far more than a nice visual editor producing a graph: a configuration graph produced with <code>ModelMaker</code> is <strong>guaranteed</strong> to run with <code>ModelRunner</code> because of all these internal consistency and validity checks.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="trueusing-modelmaker-software-interface-and-functioning"><a class="anchor" href="#trueusing-modelmaker-software-interface-and-functioning"></a>3.2. Using ModelMaker: software interface and functioning</h3>
<div class="paragraph">
<p><strong>TO DO</strong>: step-by-step description of using the user interface. With screenshots.</p>
</div>
</div>
<div class="sect2">
<h3 id="trueconfiguration-options-reference"><a class="anchor" href="#trueconfiguration-options-reference"></a>3.3. Configuration options: reference</h3>
<div class="paragraph">
<p>In this section,</p>
</div>
<div class="ulist">
<ul>
<li>
<p>node and edge labels are indicated in <code><strong>bold</strong></code></p>
</li>
<li>
<p>text in triangular brackets (<code>&lt;&gt;</code>) mean a user-defined value is expected; the text usually specifies what kind of value is expected (e.g. <code>&lt;<em>name</em>&gt;</code> for a name, <code>&lt;<em>int</em>&gt;</code> for an integer number, etc.). If the text is required, it will be <span class="underline">underlined</span>, otherwise it is optional</p>
</li>
<li>
<p>a <em>multiplicity</em> in curly braces {} tells how many times the item may appear in a configuration:</p>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
{1}
</td>
<td class="hdlist2">
<p>exactly one item is required</p>
</td>
</tr>
<tr>
<td class="hdlist1">
{0..1}
</td>
<td class="hdlist2">
<p>the item is optional, i.e. one or zero is required</p>
</td>
</tr>
<tr>
<td class="hdlist1">
{1..*}
</td>
<td class="hdlist2">
<p>one to many items are required</p>
</td>
</tr>
<tr>
<td class="hdlist1">
{0..*}
</td>
<td class="hdlist2">
<p>any number of items is possible</p>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>levels in the tree hierarchy are indicated by slashes <code>/</code>.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="truethe-3worlds-node"><a class="anchor" href="#truethe-3worlds-node"></a>3.3.1. The <em>3Worlds</em> node</h4>
<div class="paragraph">
<p><code>/<strong>3worlds</strong>:&lt;<span class="underline"><em>name</em></span>&gt;</code> {1}</p>
</div>
<div class="paragraph">
<p>This node is the root of any 3Worlds configuration file (<a href="#fig-root-example">Figure 6</a>). The name will appear in <code>ModelMaker</code>'s main window title, in the <strong>project directory name</strong> and in the <strong>configuration graph file</strong>. The name is requested and set when creating a new project (<code>Projects&gt;New</code> menu entry in <code>ModelMaker</code>).</p>
</div>
<div id="fig-root-example" class="imageblock text-center">
<div class="content">
<img src="example-root.png" alt="example root">
</div>
<div class="title">Figure 6. The base tree of any 3Worlds configuration</div>
</div>
</div>
<div class="sect3">
<h4 id="truethe-system-node"><a class="anchor" href="#truethe-system-node"></a>3.3.2. The <em>system</em> node</h4>
<div class="paragraph">
<p><code>/3worlds/<strong>system</strong>:&lt;<span class="underline"><em>name</em></span>&gt;</code> {1..*}</p>
</div>
<div class="paragraph">
<p>This node and its sub-tree contains all the ecological concepts used to define a simulation model: what entities are modelled, what biological processes apply to them, at what time step they should run. The name is used to differentiate models as a simulation experiment may involve more than one model.</p>
</div>
<div class="paragraph">
<p>A 3Worlds ecosystem is constructed as a population of 'biological entities', called <em>system components</em>, which establish interactions called <em>system relations</em>. Components and relations have <em>variables</em> that may change value over time, according to various <em>ecological processes</em> attached to components. In other words, an ecosystem is represented as a <em>dynamic graph</em> which changes state and structure over time. To reflect this, <code><strong>system</strong></code> has two sub-trees called <code><strong>structure</strong></code> and <code><strong>dynamics</strong></code></p>
</div>
</div>
<div class="sect3">
<h4 id="truethe-systemstructure-node"><a class="anchor" href="#truethe-systemstructure-node"></a>3.3.3. The <em>system/structure</em> node</h4>
<div class="paragraph">
<p><code>/3worlds/system/<strong>structure</strong>:&lt;<span class="underline"><em>name</em></span>&gt;</code> {1}</p>
</div>
<div class="paragraph">
<p>This node and its sub-tree contains the description of the system component and relation types. It is based on the concept of <em>category</em>. A category is a set of components with an identical description, e.g. the same set of state variables or the same growth function.</p>
</div>
<div class="sect4">
<h5 id="truethe-category-and-related-concepts-specification-of-groups-of-entities"><a class="anchor" href="#truethe-category-and-related-concepts-specification-of-groups-of-entities"></a>The <em>category</em> and related concepts: specification of groups of entities</h5>
<div class="paragraph">
<p>3Worlds uses these concepts to specify and generate the ecological entities manipulated during a simulations.</p>
</div>
<div class="sect5">
<h6 id="truecategory"><a class="anchor" href="#truecategory"></a>Category</h6>
<div class="paragraph">
<p><code>&#8230;&#8203;/categorySet/<strong>category</strong>:&lt;<span class="underline"><em>name</em></span>&gt;</code> {1..*}</p>
</div>
<div class="paragraph">
<p>A <code><strong>category</strong></code> is simply a name attached to a set of objects sharing common properties. Practically, these common properties are <em>state variables</em>, <em>parameters</em> and dynamic behaviours (or <em>processes</em>). Categories, grouped into <code><strong>categorySet</strong></code>s, constitute a user-defined <em>classification</em> of <em>system component types</em> relevant for a particular model.</p>
</div>
<div class="paragraph">
<p>To make this classification useful, we attach <em>parameters</em> and <em>state variables</em> to categories. State variables are variables (numbers, text, logical values) that characterize the state of a system component at an instant in time (<em>e.g.</em> biomass, age, sex, social status&#8230;&#8203;). They will vary during a simulation. Parameters do not vary during a simulation; they are characteristic of a group of system components sharing them&#8201;&#8212;&#8201;conceptually, a 'species' (e.g. average individual growth rate, mortality rate&#8230;&#8203;).</p>
</div>
<div class="paragraph">
<p>Practically, this means that any instance of a system component of a given category will implement the state variables of this category and share parameters with other system components of the same 'species'.</p>
</div>
<div class="paragraph">
<p>The exact data structures for state variables and parameters are specified under the <a href="#truethe-em-dataDefinition-em-node">dataDefinition</a> node and linked to the category through the following:</p>
</div>
<div class="paragraph">
<p><em>Cross-links for</em> <code>category</code>:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>parameters &#8594; record:&lt;<span class="underline"><em>name</em></span>&gt;</code> {0..1}</dt>
<dd>
<p>This link tells which record data structure (in <a href="#truethe-em-codesource-em-node">codeSource</a>) is used to store parameters.</p>
</dd>
<dt class="hdlist1"><code>drivers &#8594; record:&lt;<span class="underline"><em>name</em></span>&gt;</code> {0..1}</dt>
<dt class="hdlist1"><code>decorators &#8594; record:&lt;<span class="underline"><em>name</em></span>&gt;</code> {0..1}</dt>
<dd>
<p>Similarly, these links tell which data structure in <a href="#truethe-em-dataDefinition-em-node">dataDefinition</a> is used to store state variables. State variables are further classified into <em>drivers</em>, i.e. variables that <em>drive</em> the dynamics of the system; and <em>decorators</em>, i.e. secondary state variables which values are computed from those of the drivers, only reflecting the dynamics of the drivers.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>A category may be defined with no parameters, drivers or decorators, but it would be pretty useless to have neither of them.</p>
</div>
</div>
<div class="sect5">
<h6 id="truecategoryset"><a class="anchor" href="#truecategoryset"></a>CategorySet</h6>
<div class="paragraph">
<p><code>/3worlds/system/structure/<strong>categorySet</strong>:&lt;<span class="underline"><em>name</em></span>&gt;</code> {1..*}</p>
</div>
<div class="paragraph">
<p>Some categories must be exclusive of each other: for example, an ecological entity is either a plant or an animal, but can&#8217;t be both. For this reason, <em>exclusive</em> categories are grouped into <code><strong>categorySets</strong></code>. A categorySet is <em>a set of <strong>mutually exclusive</strong> categories</em>. Further, it may apply only to categories of a particular type (categorySet). Hence categories can be nested:</p>
</div>
<div class="paragraph">
<p><code>&#8230;&#8203;/category/<strong>categorySet</strong>:&lt;<span class="underline"><em>name</em></span>&gt;</code> {0..*}</p>
</div>
</div>
<div class="sect5">
<h6 id="truerelationtype"><a class="anchor" href="#truerelationtype"></a>RelationType</h6>
<div class="paragraph">
<p><code>/3worlds/system/structure/<strong>relationType</strong>:&lt;<span class="underline"><em>name</em></span>&gt;</code> {0..*}</p>
</div>
<div class="paragraph">
<p>A <code><strong>relationType</strong></code> is just a name representing a meaningful link between two categories. It is specified by giving it a name and cross-linking it to the relevant categories with <code>fromCategory</code> and <code>toCategory</code> cross-links. Note that a relationType can link more than one 'from' categories to more than one 'to' categories if required. RelationTypes are used to implement specific processes acting on ecological entities (for example, a predation process).</p>
</div>
<div class="paragraph">
<p><em>Cross-links for</em> <code>relationType</code>:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>fromCategory &#8594; category:&lt;<em>name</em>&gt;</code> {1..*}</dt>
<dd>
<p>This link tells which categories are at the start of the relation.</p>
</dd>
<dt class="hdlist1"><code>toCategory &#8594; category:&lt;<em>name</em>&gt;</code> {1..*}</dt>
<dd>
<p>This link tells which categories are at the end of the relation</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><em>Properties for</em> <code>relationType</code>:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>lifespan</code>
</td>
<td class="hdlist2">
<p>This property specifies if this type of relation will stay attached to its <code>systemComponents</code> during all their life, or may get created and deleted during their lifespan.</p>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><em>possible values</em>:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>permanent</code>
</td>
<td class="hdlist2">
<p>(1) system component stays forever during a simulation, (2) relation stays as long as both its ends stay (default value)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>ephemeral</code>
</td>
<td class="hdlist2">
<p>system component / relations are created and deleted during a simulation by the means of the appropriate  <code>Function</code> classes (e.g. <code>DeleteDecision</code>, <code>CreateOtherDecision</code>, etc. cf. <code>TwFunctionTypes</code>)</p>
</td>
</tr>
</table>
</div>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect5">
<h6 id="trueexample-a-category-tree"><a class="anchor" href="#trueexample-a-category-tree"></a>Example: a category tree</h6>
<div class="paragraph">
<p>On this diagram (generated with <code>ModelMaker</code>), hierarchical links are in green and cross-links are in black.</p>
</div>
<div id="fig-category-example" class="imageblock text-center">
<div class="content">
<img src="example-category.png" alt="example category">
</div>
<div class="title">Figure 7. Example of a configuration with category sets, categories and relations</div>
</div>
<div class="paragraph">
<p>In this example, a <em>plant</em> can be a <em>C3 tree</em> but cannot be simultaneously a <em>grass</em> and a <em>liana</em>. Similarly, an <em>animal</em> cannot be both <em>herbivore</em> and <em>carnivore</em>. The <em>predation</em> relation links an <em>animal</em> of any kind (the prey) to a <em>carnivore</em> (its predator).</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="truethe-specification-of-ecological-entities-system-components"><a class="anchor" href="#truethe-specification-of-ecological-entities-system-components"></a>The specification of ecological entities: <em>system components</em></h5>
<div class="sect5">
<h6 id="truesystem-component"><a class="anchor" href="#truesystem-component"></a>System component</h6>
<div class="paragraph">
<p><code>/3worlds/system/structure/<strong>componentType</strong>:&lt;<span class="underline"><em>name</em></span>&gt;</code> {1..*}</p>
</div>
<div class="paragraph">
<p>3Worlds simulates a <em>system</em> made of <em>system components</em>. These are the things which are instantiated at run time, hold state variables, and are dynamically changed over the time course of a simulation. When setting up a simulation, one must attach <em>categories</em> to <em>system components</em>. The rules prevailing to build up categories hierarchies mean that a system can belong to a number of non-exclusive categories, as long as the exclusion and nesting rules are respected. For example, we could define a system as belonging to the <em>plant</em> and <em>tree</em> categories, but not to the <em>animal</em> and <em>tree</em> categories.</p>
</div>
<div class="paragraph">
<p><em>Cross-links</em> for <code>componentType</code>:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>belongsTo &#8594; category:&lt;<em>name</em>&gt;</code> {1..*}</dt>
<dd>
<p>This link tells to which categories a system component type belongs. The categories must not belong to the same category set. If there are nested categories, membership is inherited (e.g. in the previous example, belonging to the <em>C3</em> category automatically implies the system component is also a <em>plant</em>).</p>
</dd>
<dt class="hdlist1"><code>initialiser &#8594; initialiser:&lt;<em>name</em>&gt;</code> {0..1}</dt>
<dd>
<p>Use this optional link to specify a function to initialise state variables of a <code>componentType</code> at the beginning of a simulation.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><em>Properties for</em> <code>component</code>:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>lifespan</code>
</td>
<td class="hdlist2">
<p>This property specifies if this type of system component will stay forever, or may get created and deleted during a simulation</p>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><em>possible values</em>:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>permanent</code>
</td>
<td class="hdlist2">
<p>(1) system component stays forever during a simulation, (2) relation stays as long as both its ends stay (default value)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>ephemeral</code>
</td>
<td class="hdlist2">
<p>system component / relations are created and deleted during a simulation by the means of the appropriate  <code>Function</code> classes (e.g. <code>DeleteDecision</code>, <code>CreateOtherDecision</code>, etc. cf. <code>TwFunctionTypes</code>)</p>
</td>
</tr>
</table>
</div>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="truethe-systemdynamics-node"><a class="anchor" href="#truethe-systemdynamics-node"></a>3.3.4. The <em>system/dynamics</em> node</h4>
<div class="paragraph">
<p><code>/3worlds/system/<strong>dynamics</strong>:&lt;<span class="underline"><em>name</em></span>&gt;</code> {1}</p>
</div>
<div class="paragraph">
<p>This node and its sub-tree contains the description of the processes that will change the state of the system and create its dynamics. It is based on the concepts of <em>time model</em>, <em>ecological process</em>, and <em>life cycle</em>. Internally, the <code><strong>dynamics</strong></code> node is the <em>simulator</em>, i.e. the object which, when kicked to do so, will make all the computations necessary to run a simulation.</p>
</div>
<div class="sect4">
<h5 id="truethe-representation-of-time"><a class="anchor" href="#truethe-representation-of-time"></a>The representation of time</h5>
<div class="paragraph">
<p>Simulation is about mimicking the dynamics of a real system. Here, dynamics is specified by attaching particular behaviours (called processes) to either categories or relations. Processes may act at a different rhythm or rate in nature, so we need to have a great flexibility in the way time is represented.</p>
</div>
<div class="sect5">
<h6 id="truetime-line"><a class="anchor" href="#truetime-line"></a>Time line</h6>
<div class="paragraph">
<p><code>/3worlds/system/dynamics/<strong>timeLine</strong>:&lt;<span class="underline"><em>name</em></span>&gt;</code> {1}</p>
</div>
<div class="paragraph">
<p>Every simulator has a reference <em>time line</em>. Since different ecological processes may run according to different time models, they must refer to a common time frame for interaction to be possible among them. A <code><strong>timeLine</strong></code> defines what kind of time scale and time units can be used in a simulation. In 3Worlds, time is always discrete in the end, so that the selected values of time scale and time unit define the time <em>grain</em> of the simulation, i.e. the duration below which events are considered simultaneous. Internally, the <code>ModelRunner</code> uses integers to represent time, with 1 = one time grain.</p>
</div>
<div class="paragraph">
<p><em>Properties for</em> <code>timeLine</code>:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>scale</code>
</td>
<td class="hdlist2">
<p>This property specifies the type of time scale to use. The usual time units pose many problems, because years, months, weeks and days are not integer multiples of each other. The option is either to use a real calendar time scale – but this is not needed in most simulation studies – or to use approximations which enable year, months, weeks and days to be integer multiples of each other (e.g. an easy approximation is to assume 30-day months, but this means years must be only 360-day long). This property proposes a set of such simplified, compatible sets of units, denoted as time scales.</p>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><em>possible values</em>:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>MONO_UNIT</code>
</td>
<td class="hdlist2">
<p>single time unit, calendar-compatible (default value)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>GREGORIAN</code>
</td>
<td class="hdlist2">
<p>real calendar time</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>YEAR_365D</code>
</td>
<td class="hdlist2">
<p>365-days years, no weeks, no months</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>YEAR_13M</code>
</td>
<td class="hdlist2">
<p>28-days months, 13-months/52-weeks years</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>WMY</code>
</td>
<td class="hdlist2">
<p>28-days months, 12-months/48-weeks years</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>MONTH_30D</code>
</td>
<td class="hdlist2">
<p>30-days months, weeks replaced by 15-days fortnights</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>YEAR_366D</code>
</td>
<td class="hdlist2">
<p>366-days year, months replaced by 61-days bi-months</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>LONG_TIMES</code>
</td>
<td class="hdlist2">
<p>long time units only (month or longer), calendar-compatible</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>SHORT_TIMES</code>
</td>
<td class="hdlist2">
<p>short time units only (week or shorter), calendar-compatible</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>ARBITRARY</code>
</td>
<td class="hdlist2">
<p>arbitrary time units with no predefined name</p>
</td>
</tr>
</table>
</div>
</div>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>shortestTimeUnit</code>
</td>
<td class="hdlist2">
<p>The shortest time unit used in this model. Note that the time scale constraints the time units compatible with each other for this property.</p>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><em>possible values</em>:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>UNSPECIFIED</code>
</td>
<td class="hdlist2">
<p>an arbitrary time unit (default value)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>MICROSECOND</code>
</td>
<td class="hdlist2">
<p>microsecond</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>MILLISECOND</code>
</td>
<td class="hdlist2">
<p>millisecond = 1000 microseconds</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>SECOND</code>
</td>
<td class="hdlist2">
<p>second = 1000 milliseconds</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>MINUTE</code>
</td>
<td class="hdlist2">
<p>minute = 60 seconds</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>HOUR</code>
</td>
<td class="hdlist2">
<p>hour = 60 minutes</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>DAY</code>
</td>
<td class="hdlist2">
<p>day = 24 hours</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>WEEK</code>
</td>
<td class="hdlist2">
<p>week = 7 days</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>FORTNIGHT_15</code>
</td>
<td class="hdlist2">
<p>French-style fortnight = 15 days</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>MONTH_28</code>
</td>
<td class="hdlist2">
<p>month = 4 weeks of 7 days</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>MONTH_30</code>
</td>
<td class="hdlist2">
<p>month = 30 days</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>MONTH</code>
</td>
<td class="hdlist2">
<p>calendar month (= 1/12 of a calendar year), <em>i.e.</em> approx. 30,44 days, but with irregular durations (28,29, 30 or 31 days)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>BIMONTH_61</code>
</td>
<td class="hdlist2">
<p>2 months = 61 days</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>YEAR_336</code>
</td>
<td class="hdlist2">
<p>year = 12 months of 4 weeks of 7 days</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>YEAR_360</code>
</td>
<td class="hdlist2">
<p>year = 12 months of 30 days</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>YEAR_364</code>
</td>
<td class="hdlist2">
<p>year = 52 weeks of 7 days = 13 months of 28 days</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>YEAR_365</code>
</td>
<td class="hdlist2">
<p>year = 365 days</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>YEAR</code>
</td>
<td class="hdlist2">
<p>calendar year, <em>i.e.</em> approx. 365.25 days, but with irregular durations (365 or 366 days)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>YEAR_366</code>
</td>
<td class="hdlist2">
<p>year = 6 bimonths of 61 days</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>DECADE</code>
</td>
<td class="hdlist2">
<p>decade = 10 years</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>CENTURY</code>
</td>
<td class="hdlist2">
<p>century = 10 decades</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>MILLENNIUM</code>
</td>
<td class="hdlist2">
<p>millennium = 10 centuries</p>
</td>
</tr>
</table>
</div>
</div>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>longestTimeUnit</code>
</td>
<td class="hdlist2">
<p>The longest time unit used in this model. <em>cf.</em> <code>shortestTimeUnit</code> for valid values</p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect5">
<h6 id="truetime-models"><a class="anchor" href="#truetime-models"></a>Time models</h6>
<div class="paragraph">
<p><code>/3worlds/system/dynamics/timeLine/<strong>timeModel</strong>:&lt;<span class="underline"><em>name</em></span>&gt;</code> {1..*}</p>
</div>
<div class="paragraph">
<p>Ecological processes may be run following different time models. A time model is a particular way of representing time in the simulator. Time models may differ in parameters, like e.g. two time models using different time steps; but they can also be radically different in their logic: e.g. clock-like ticking vs. event-driven simulation.</p>
</div>
<div class="paragraph">
<p><em>Properties for</em> <code>timeModel</code>:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>timeUnit</code>
</td>
<td class="hdlist2">
<p>the base time unit used by this model. <em>cf.</em> <code>timeLine.shortestTimeUnit</code> for the valid values of this property</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>nTimeUnits</code>
</td>
<td class="hdlist2">
<p>the number of base time units in the time unit of this model (<em>e.g.</em>, a model may have a 2 year time unit)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>runAtTimeZero</code>
</td>
<td class="hdlist2">
<p>whether model state must be computed at time origin, <em>i.e.</em> before simulation start</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>class</code>
</td>
<td class="hdlist2">
<p>the type of <code>timeModel</code> to use.</p>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><em>possible values</em>:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>ClockTimeModel</code>
</td>
<td class="hdlist2">
<p>Time is incremented by a constant amount <em>dt</em>. This is commonly used to simulate regular processes like growth.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>EventTimeModel</code>
</td>
<td class="hdlist2">
<p>Model dynamics generates <em>events</em> and computes the date in the future at which they are going to occur. This is commonly used to generate irregular processes like fire occurrence.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>ScenarioTimeModel</code>
</td>
<td class="hdlist2">
<p><strong>Not yet implemented</strong>.</p>
</td>
</tr>
</table>
</div>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><em>Additional properties when</em> <code>class = ClockTimeModel</code></p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>dt</code>
</td>
<td class="hdlist2">
<p>The constant time increment used in this <code>ClockTimeModel</code>, expressed as an integer number of <code>TimeModel</code> base unit (=<code>TimeModel.nTimeUnits</code> x <code>TimeModel.timeUnit</code>). For example, if the TimeModel has <code>timeUnit</code> = <code>DAY</code> and <code>nTimeUnits</code> = 3, <code>dt</code> is expressed in units of 3 days (e.g. <code>dt</code> = 2 means the time increment is 6 days).</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
if calendar time is used (<code>timeLine.scale</code> = <code>GREGORIAN</code>), then <code>dt</code> will sometimes not be constant (e.g. if <code>dt</code> = 2 <code>MONTH</code>, <code>dt</code> will vary in duration between 28 and 31 days according to the exact date).
</td>
</tr>
</table>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><em>Additional sub-tree when</em> <code>class = EventTimeModel</code></p>
</div>
<div class="paragraph">
<p><code>/3worlds/system/dynamics/timeLine/timeModel/<strong>eventQueue</strong>:&lt;<span class="underline"><em>name</em></span>&gt;</code> {1}</p>
</div>
<div class="paragraph">
<p>An <code>EventTimeModel</code> maintains a queue of time events that gets populated by ecological processes. Time events are stored in this queue based on their date and activated by the simulator following time order.</p>
</div>
<div class="paragraph">
<p><em>Cross-links for</em> <code>eventQueue</code></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>populatedBy &#8594; function:&lt;<span class="underline"><em>name</em></span>&gt;</code> {1..*}</dt>
<dd>
<p>These links indicate which ecological processes will populate the event queue with time events.</p>
</dd>
</dl>
</div>
</div>
<div class="sect5">
<h6 id="truesimulation-stopping-condition"><a class="anchor" href="#truesimulation-stopping-condition"></a>Simulation stopping condition</h6>
<div class="paragraph">
<p><code>/3worlds/system/dynamics/<strong>stoppingCondition</strong>:&lt;<span class="underline"><em>name</em></span>&gt;</code> {0..*}</p>
</div>
<div class="paragraph">
<p>A simulation may be run indefinitely (interactively), but in big simulation experiment it is useful to automatically stop the simulations according to some criterion. Besides the simplest stopping condition, reaching a maximal time value, 3Worlds provides many other possibilities to stop a simulation (e.g. based on a population size, on a variable passing a threshold value, etc.).</p>
</div>
<div class="paragraph">
<p>When no stopping condition is defined, the simulation will run indefinitely.</p>
</div>
<div class="paragraph">
<p><em>Properties for</em> <code>stoppingCondition</code></p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>class</code>
</td>
<td class="hdlist2">
<p>The type of stopping condition to use</p>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><em>possible values</em>:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>SimpleStoppingCondition</code></dt>
<dd>
<p>Simulation stops when a maximal time value is reached.</p>
</dd>
<dt class="hdlist1"><code>ValueStoppingCondition</code></dt>
<dd>
<p>Simulation stops when a variable in a reference system component is reached.</p>
</dd>
<dt class="hdlist1"><code>InRangeStoppingCondition</code></dt>
<dd>
<p>Simulation stops when a variable in a reference system gets within the given range.</p>
</dd>
<dt class="hdlist1"><code>OutRangeStoppingCondition</code></dt>
<dd>
<p>Simulation stops when a variable in a reference system gets out of the given range.</p>
</dd>
<dt class="hdlist1"><code>MultipleOrStoppingCondition</code></dt>
<dd>
<p>Compound stopping condition: simulation stops when <em>any</em> of the elementary stopping conditions within this multiple condition&#8217;s list is true.</p>
</dd>
<dt class="hdlist1"><code>MultipleAndStoppingCondition</code></dt>
<dd>
<p>Compound stopping condition: simulation stops when <em>all</em> of the elementary stopping conditions within this multiple condition&#8217;s list are true.</p>
</dd>
</dl>
</div>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><em>Additional properties when</em> <code>class = SimpleStoppingCondition</code></p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>endTime</code>
</td>
<td class="hdlist2">
<p>The time at which the simulation will stop, in time line <code>shortestTimeUnits</code>.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><em>Additional cross-links when</em> <code>class = ValueStoppingCondition</code>, <code>InRangeStoppingCondition</code>,  <code>OutRangeStoppingCondition</code></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>stopSystem &#8594; component:&lt;<span class="underline"><em>name</em></span>&gt;</code> {1}</dt>
<dd>
<p>The system component in which the criterion variable will be checked to stop the simulation.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><em>Additional properties when</em> <code>class = ValueStoppingCondition</code></p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>stopValue</code>
</td>
<td class="hdlist2">
<p>The value of <code>stopVariable</code> at which to stop the simulation.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><em>Additional properties when</em> <code>class = InRangeStoppingCondition</code>, <code>OutRangeStoppingCondition</code></p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>upper</code>
</td>
<td class="hdlist2">
<p>The upper value of the <code>stopVariable</code> range. Only <code>double</code> values are accepted.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>lower</code>
</td>
<td class="hdlist2">
<p>The lower value of the <code>stopVariable</code> range. Only <code>double</code> values are accepted.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><em>Additional cross-links when</em> <code>class = MultipleOrStoppingCondition</code>, <code>MultipleAndStoppingCondition</code></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>condition &#8594; stoppingCondition:&lt;<span class="underline"><em>name</em></span>&gt;</code> {1}</dt>
<dd>
<p>These links point to the stopping conditions that will be used as elementary stopping conditions by the multiple and/or stopping condition.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect4">
<h5 id="truethe-transformations-of-a-system-component"><a class="anchor" href="#truethe-transformations-of-a-system-component"></a>The transformations of a system component</h5>
<div class="paragraph">
<p>Changes in a <em>system component</em> through time may be of different kinds: changes in <em>state</em>, i.e. in its driver and decorator variables; or more radical changes where the component actually changes <em>category</em>, so becomes represented by a different set of variables. Plus, a component may have an ephemeral life (lifespan property), which means component objects are dynamically created or deleted during a simulation.</p>
</div>
<div class="paragraph">
<p>To represent category changes, start and end of life, we need the concept of a <em>life cycle</em>: a series of successive discrete states decribed by different categories (starting  from non-existence and finishing alike). Notice that the life cycle is optional: if a system component is going to be represented by the same set of variables (same category) during its whole life, there is no need to attach a life cycle to it as there will be no transition to other categories.</p>
</div>
<div class="sect5">
<h6 id="truelife-cycle"><a class="anchor" href="#truelife-cycle"></a>Life cycle</h6>
<div class="paragraph">
<p><code>/3worlds/system/dynamics/<strong>lifeCycle</strong>:&lt;<span class="underline"><em>name</em></span>&gt;</code> {0..*}</p>
</div>
<div class="paragraph">
<p>As <em>system component</em>s are designed to represent&#8201;&#8212;&#8201;among other things&#8201;&#8212;&#8201;individual organisms, they are able to create other system components ar runtime, or to transform themselves into a system component of another category assemblage. These abilities are captured in a <code><strong>lifeCycle</strong></code>, which describes the possible creations and transitions of system components of a given category set into another.</p>
</div>
<div class="paragraph">
<p>Since <code>components</code> belong to <code>categories</code>, different types of system components represented by different state variables, subject to different ecological processes, can coexist in a simulation. It may occur in a particular model that one wishes to represent a transition between, e.g. development stages: think for example of a caterpillar turning into a butterfly. There are chances that you don&#8217;t want to describe the caterpillar with the same variables and behaviours as the adult butterfly. The operation of transforming a system component from a selection of categories to another is called <em>recruitment</em>. Computationally, it means that the simulator must keep track of the system component&#8217;s identity and age in the first stage and carry these properties on to the new system component of the second stage, and call an appropriate function to transform state variables of the first stage into the new one.</p>
</div>
<div class="paragraph">
<p><em>Reproduction</em> is the second process by which system components of a given group of categories may produce other system components belonging to possibly different categories.</p>
</div>
<div class="paragraph">
<p>A specification of a life cycle requires:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>a <code>categorySet</code> in which the categories represent the various stages of the life cycle;</p>
</li>
<li>
<p><code>recruit</code> and <code>produce</code> nodes linking categories within this set to describe possible recruitment and reproduction pathways;</p>
</li>
<li>
<p>optionnally, a <code>category</code> can be linked to a <code>lifeCycle</code> if one wants to attach parameters to the life cycle.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><em>Cross-links for</em> <code>lifeCycle</code></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>appliesTo &#8594; categorySet:&lt;<span class="underline"><em>name</em></span>&gt;</code> {1}</dt>
<dd>
<p>This links indicates which categories define the stages of the life cycle. <code>recruit</code> or <code>produce</code> nodes can only link categories of this set.</p>
</dd>
<dt class="hdlist1"><code>belongsTo &#8594; category:&lt;<span class="underline"><em>name</em></span>&gt;</code> {0..*}</dt>
<dd>
<p>These links enable to attach parameters to a <code>lifeCycle</code>, if needed by some ecological processes. The categories targets of these links must be specific to life cycles, i.e. no <code>component</code> or <code>process</code> should refer (<code>belongTo</code> cross-link) to any of them.</p>
</dd>
</dl>
</div>
</div>
<div class="sect5">
<h6 id="truerecruitment"><a class="anchor" href="#truerecruitment"></a>Recruitment</h6>
<div class="paragraph">
<p><code>/3worlds/system/dynamics/lifeCycle/<strong>recruit</strong>:&lt;<span class="underline"><em>name</em></span>&gt;</code> {0..*}</p>
</div>
<div class="paragraph">
<p>This node specifies that two categories of the life cycle <code>categorySet</code> are linked by a <em>recruitment</em> process.</p>
</div>
<div class="paragraph">
<p><em>Cross-links for</em> <code>recruit</code>:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>fromCategory &#8594; category:&lt;<em>name</em>&gt;</code> {1}</dt>
<dd>
<p>This link tells which system component type is getting changed by the recruitment.</p>
</dd>
<dt class="hdlist1"><code>toCategory &#8594; category:&lt;<em>name</em>&gt;</code> {1}</dt>
<dd>
<p>This link tells which system component type is the result of the recruitment.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
multiple targets are possible from the same category, i.e. a component of a category may recruit to different categories. E.g., a bee larva can recruit to a worker or a queen.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>effectedBy &#8594; process:&lt;<em>name</em>&gt;</code> {1}</dt>
<dd>
<p>This link tells which ecological process is used to compute the recruitment. This process must implement at least one<strong>[maximum one? it returns a category name]</strong> <code>ChangeCategoryDecision</code> function (cf <a href="#a">TODO</a>).</p>
</dd>
</dl>
</div>
</div>
<div class="sect5">
<h6 id="truereproduction"><a class="anchor" href="#truereproduction"></a>Reproduction</h6>
<div class="paragraph">
<p><code>/3worlds/system/dynamics/lifeCycle/<strong>produce</strong>:&lt;<span class="underline"><em>name</em></span>&gt;</code> {0..*}</p>
</div>
<div class="paragraph">
<p>This node specifies that two categories of the life cycle <code>categorySet</code> are linked by a <em>reproduction</em> process.</p>
</div>
<div class="paragraph">
<p><em>Cross-links for</em> <code>produce</code>:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>fromCategory &#8594; category:&lt;<em>name</em>&gt;</code> {1}</dt>
<dd>
<p>This link tells which system component type is producing new system components.</p>
</dd>
<dt class="hdlist1"><code>toCategory &#8594; category:&lt;<em>name</em>&gt;</code> {1}</dt>
<dd>
<p>This link tells which system component type is the result of the reproduction.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
multiple targets are possible from the same category, i.e. a component of a category may produce components of different categories. E.g., a tree can produce seedlings through sexual reproduction and root suckers through vegetative reproduction.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>effectedBy &#8594; process:&lt;<em>name</em>&gt;</code> {1}</dt>
<dd>
<p>This link tells which ecological process is used to compute the production of new system components. This process must implement at least one <code>CreateOtherDecision</code> function (cf <a href="#a">TODO</a>).</p>
</dd>
</dl>
</div>
</div>
<div class="sect5">
<h6 id="trueexample-of-a-life-cycle-specification"><a class="anchor" href="#trueexample-of-a-life-cycle-specification"></a>Example of a life cycle specification</h6>
<div class="paragraph">
<p>This life cycle:</p>
</div>
<div id="fig-life-cycle-example" class="imageblock text-center">
<div class="content">
<img src="example-life-cycle.svg" alt="example life cycle">
</div>
<div class="title">Figure 8. Example of a life cycle</div>
</div>
<div class="paragraph">
<p>is specified with this graph:</p>
</div>
<div id="fig-life-cycle-config-example" class="imageblock text-center">
<div class="content">
<img src="example-life-cycle.png" alt="example life cycle">
</div>
<div class="title">Figure 9. Example of a life cycle configuration</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="trueecological-processes"><a class="anchor" href="#trueecological-processes"></a>Ecological processes</h5>
<div class="sect5">
<h6 id="trueprocess"><a class="anchor" href="#trueprocess"></a>Process</h6>
<div class="paragraph">
<p><code>/3worlds/system/dynamics/timeLine/timeModel/<strong>process</strong>:&lt;<span class="underline"><em>name</em></span>&gt;</code> {1..*}</p>
</div>
<div class="paragraph">
<p><em>Processes</em> are used in 3Worlds to compute change in <em>system components</em>. Each process acts on system components of a particular group of categories (cf. <a href="#truecategory">Category</a>, <a href="#truesystem-component">System Component</a>) and is scheduled by a particular time model (cf. <a href="#truetime-representation">time representation</a>). Processes contain user-defined code that represents ecological processes. This gives 3Worlds its versatility: one can mix in a single model completely different ecological entities (system components of different categories), implement any ecological process depending on user needs, and put them to work on different time scales (time models). A <code>process</code> is run according to its parent <code>timeModel</code>.</p>
</div>
<div class="paragraph">
<p><em>Cross-links for</em> <code>process</code></p>
</div>
<div class="paragraph">
<p>A process can act on a single system component at a time (called the <em>focal</em> system component), or on a pair of components linked by a relation (called the <em>focal</em> and the <em>other</em> system components). This is specified using the <code>appliesTo</code> cross-link (one at least must be present):</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>appliesTo &#8594; category:&lt;<span class="underline"><em>name</em></span>&gt;</code> {0..*}</dt>
<dd>
<p>These links indicate the categories of system components that will be acted on by the process.</p>
</dd>
<dt class="hdlist1"><code>appliesTo &#8594; relation:&lt;<span class="underline"><em>name</em></span>&gt;</code> {0..1}</dt>
<dd>
<p>This link indicates to which relation type between system component the process applies.</p>
</dd>
<dt class="hdlist1"><code>dependsOn &#8594; process:&lt;<span class="underline"><em>name</em></span>&gt;</code> {0..*}</dt>
<dd>
<p>This link tells that the process must be activated <em>after</em> the processes targeted by the links. Use this link to organize computations when there are dependencies between them.</p>
</dd>
</dl>
</div>
</div>
<div class="sect5">
<h6 id="truefunction"><a class="anchor" href="#truefunction"></a>Function</h6>
<div class="paragraph">
<p><code>/3worlds/system/dynamics/timeLine/timeModel/<strong>function</strong>:&lt;<span class="underline"><em>name</em></span>&gt;</code> {1..*}</p>
</div>
<div class="paragraph">
<p>This node is used to specify the details of the computations made in a <code>process</code>. The <code>process</code> defines which system components are going to be activated and at what time in the simulation course; the <code>function</code> defines which computations, in detail, will be applied to the system components of that process. This enables to build complex computations applying to one component (a series of <code>function</code>s within a <code>process</code>) in the context of a particular subset of components (<code>process</code>).</p>
</div>
<div class="paragraph">
<p>There are different types of functions, differing by the way they affect system components and relations. This is specified by setting the <code>type</code> property to the desired function type.</p>
</div>
<div class="paragraph">
<p><em>Properties for</em> <code>function</code>:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>type</code>
</td>
<td class="hdlist2">
<p>This property specifies which kind of biological function will be implemented within the linked <code>Process</code> obect.</p>
<div class="sidebarblock">
<div class="content">
<div class="paragraph">
<p><em>possible values</em>:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>ChangeState</code>
</td>
<td class="hdlist2">
<p>change the state, ie the values of internal variables, of a system component (default value)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>ChangeCategoryDecision</code>
</td>
<td class="hdlist2">
<p>change category of a system component according to life cycle (has no effect if no life cycle is specified)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>CreateOtherDecision</code>
</td>
<td class="hdlist2">
<p>create another system component, of the same categories if no life cycle is present, otherwise as specified by the life cycle</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>DeleteDecision</code>
</td>
<td class="hdlist2">
<p>delete self</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>Aggregator</code>
</td>
<td class="hdlist2">
<p>compute statistics</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>ChangeOtherState</code>
</td>
<td class="hdlist2">
<p><em>focal</em> changes the state of <em>other</em></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>ChangeOtherCategoryDecision</code>
</td>
<td class="hdlist2">
<p><em>focal</em> changes the category of <em>other</em> (requires a life cycle for <em>other</em>)</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>DeleteOtherDecision</code>
</td>
<td class="hdlist2">
<p><em>focal</em> deletes <em>other</em></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>RelateToDecision</code>
</td>
<td class="hdlist2">
<p><em>focal</em> establishes a new relation to <em>other</em></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>MaintainRelationDecision</code>
</td>
<td class="hdlist2">
<p>decision to maintain or remove an existing relation</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>ChangeRelationState</code>
</td>
<td class="hdlist2">
<p>change the state of a relation</p>
</td>
</tr>
</table>
</div>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The selection of a function type will trigger the generation of a java source file <strong>[WHERE?]</strong> for a class having the name specified in the <code>function</code> node name.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
The name of a function must be a valid java class name, starting with an uppercase letter.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This java source file is expected to be edited by the modeller in order to implement her/his favourite version of the ecological process modelled by the function.</p>
</div>
</div>
<div class="sect5">
<h6 id="truefunction-consequences"><a class="anchor" href="#truefunction-consequences"></a>Function consequences</h6>
<div class="paragraph">
<p><code>/3worlds/&#8230;&#8203;/process/function/<strong>consequence</strong>:&lt;<span class="underline"><em>name</em></span>&gt;</code> {0..*}</p>
</div>
<div class="paragraph">
<p>Some functions may imply consequences: for example, a decision to delete another system component may be followed by a change in state based on the deleting component&#8217;s state at the time it is deleted. Such functions that are only activated when certain events take place are called <em>consequences</em> and may be specified by a child node to a function. Here also, rules apply:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">function</th>
<th class="tableblock halign-left valign-top">consequence</th>
<th class="tableblock halign-left valign-top">use to</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>changeState</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>changeRelationState</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>changeOtherState</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deleteDecision</code></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock"><code>changeOtherState</code></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">carry over values to another component linked by a <code>returnsTo</code> relation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deleteOtherDecision</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" rowspan="3"><p class="tableblock"><code>createOtherDecision</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>changeState</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">set the initial state of the new component</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>changeOtherState</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">set values to the new component according to parent  (<em>focal</em>) state</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>relateToDecision</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">set a <code>parentTo</code> relation between new component and parent</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>changeCategoryDecision</code></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock"><code>changeOtherState</code></p></td>
<td class="tableblock halign-left valign-top" rowspan="2"><p class="tableblock">carry over and compute values from the former component (<em>focal</em>) to the new recruit</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>changeOtherCategoryDecision</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maintainRelationDecision</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>relateToDecision</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="truedata-tracking"><a class="anchor" href="#truedata-tracking"></a>Data tracking</h6>
<div class="paragraph">
<p><strong>[TO DO]</strong></p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="truethe-setup-of-an-initial-state-for-a-simulation"><a class="anchor" href="#truethe-setup-of-an-initial-state-for-a-simulation"></a>The setup of an initial state for a simulation</h5>
<div class="paragraph">
<p><strong>[TO DO: check the consistency of all this]</strong></p>
</div>
<div class="sect5">
<h6 id="trueinitial-state"><a class="anchor" href="#trueinitial-state"></a>Initial state</h6>
<div class="paragraph">
<p><code>/3worlds/system/dynamics/<strong>initialState</strong>:&lt;<em>name</em>&gt;</code> {0..1}</p>
</div>
<div class="paragraph">
<p>To run a simulation, an initial population of <code>components</code> must be provided. Nodes under the <code>initialState</code> node are used to input data to create such an initial state. The initial state is kept in memory by the simulator, and is re-loaded at every reset prior to a new simulation of the simulator.</p>
</div>
</div>
<div class="sect5">
<h6 id="truegroup"><a class="anchor" href="#truegroup"></a>Group</h6>
<div class="paragraph">
<p><code>/3worlds/&#8230;&#8203;/initialState/<strong>group</strong>:&lt;<em>name</em>&gt;</code> {0..*}</p>
</div>
<div class="paragraph">
<p>Initial system components belong to groups of individual components with common characteristics. A group is either:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>a number of components that share the same selection of categories and the same parameter set</p>
</li>
<li>
<p>or a group of previous type groups (1), belonging to the same life cycle.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><em>Cross-links for</em> <code>group</code>:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>groupOf &#8594; component:&lt;<em>name</em>&gt;</code> {0..1}</dt>
<dd>
<p>This link tells which <code>component</code> node defines the individual components of this group (type 1 above).</p>
</dd>
<dt class="hdlist1"><code>cycle &#8594; lifeCycle:&lt;<em>name</em>&gt;</code> {0..1}</dt>
<dd>
<p>This link tells which <code>lifeCycle</code> node defines the grouping of 'groupOf'-type groups (type 2 above).</p>
</dd>
</dl>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Exactly one of these cross-links must be present for every group.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Type (1) groups may be nested into type (2) groups, i.e.:</p>
</div>
<div class="paragraph">
<p><code>/3worlds/&#8230;&#8203;/initialState/group/<strong>group</strong>:&lt;<em>name</em>&gt;</code> {1..*}</p>
</div>
</div>
<div class="sect5">
<h6 id="trueindividual"><a class="anchor" href="#trueindividual"></a>Individual</h6>
<div class="paragraph">
<p><code>/3worlds/&#8230;&#8203;/initialState/<strong>individual</strong>:&lt;<em>name</em>&gt;</code> {0..*}</p>
</div>
<div class="paragraph">
<p><code>/3worlds/&#8230;&#8203;/initialState/group/<strong>individual</strong>:&lt;<em>name</em>&gt;</code> {0..*}</p>
</div>
<div class="paragraph">
<p><code>/3worlds/&#8230;&#8203;/initialState/group/group/<strong>individual</strong>:&lt;<em>name</em>&gt;</code> {0..*}</p>
</div>
<div class="paragraph">
<p>This node specifies an instance of a <em>system component</em> to be created at the beginning of a simulation.</p>
</div>
<div class="paragraph">
<p><em>Cross-links for</em> <code>individual</code>:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>instanceOf &#8594; component:&lt;<em>name</em>&gt;</code> {0..1}</dt>
<dd>
<p>This link tells which <code>component</code> node defines this individual component.</p>
</dd>
</dl>
</div>
</div>
<div class="sect5">
<h6 id="trueparameters"><a class="anchor" href="#trueparameters"></a>Parameters</h6>
<div class="paragraph">
<p>Parameter sets define a group: they are constant values which are shared by all individual members of a group.</p>
</div>
<div class="paragraph">
<p><code>/3worlds/&#8230;&#8203;/initialState/<strong>parameterValues</strong>:&lt;<em>name</em>&gt;</code> {0..*}</p>
</div>
<div class="paragraph">
<p>Use this node to attach a set of parameters to the whole ecosystem. There will be only one of such parameter sets in any given simulator. In user-defined functions, these parameters are available through the <code>focalContext.ecosystemParameters</code> field.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
all focalContext fields may be null if no value was provided at initialisation. Any user-edited function code must check for this possibility when using these fields.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>/3worlds/&#8230;&#8203;/group/<strong>parameterValues</strong>:&lt;<em>name</em>&gt;</code> {0..*}</p>
</div>
<div class="paragraph">
<p>Use this node to attach a set of parameters to a group. Each different <code><em>name</em></code> will create a different parameter set. Depending on the group type, these parameters are available through <code>focalContext.lifeCycleParameters</code> of <code>focalContext.groupParameters</code> in the user-defined functions.</p>
</div>
<div class="paragraph">
<p><code>/3worlds/&#8230;&#8203;/component/<strong>parameterValues</strong>:&lt;<em>name</em>&gt;</code> {0..*}</p>
</div>
<div class="paragraph">
<p>Use this node to attach a set of parameters to an individual system component.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
this implies that this system component is unique of its kind, and no other component is allowed to share these parameter values.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>[TODO: check this is not a flaw - how do we access these parameters ?]</strong></p>
</div>
</div>
<div class="sect5">
<h6 id="truevariables"><a class="anchor" href="#truevariables"></a>Variables</h6>
<div class="paragraph">
<p><code>/3worlds/&#8230;&#8203;/component/<strong>variableValues</strong>:&lt;<em>name</em>&gt;</code> {0..*}</p>
</div>
<div class="paragraph">
<p>Use this node to attach a set of initial driver values to an individual system component. A new component will be created for every different value of <code><em>name</em></code>.</p>
</div>
<div class="paragraph">
<p><strong>[TO DO: loading from files&#8230;&#8203;]</strong></p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<strong>Old version of documentation after this line - dont read.</strong>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="truethe-codesource-node"><a class="anchor" href="#truethe-codesource-node"></a>3.3.5. The <em>codeSource</em> node</h4>
<div class="paragraph">
<p><code>/3worlds/<strong>codeSource</strong></code> {1..*}</p>
</div>
<div class="paragraph">
<p>This node and its sub-tree contains specifications for automatic code generation needed to implement a particular model. Most of its nodes have cross-references to nodes of the <code><strong>ecology</strong></code> sub-tree. The multiplicity allows users to organise their code specifications into meaningful units</p>
</div>
</div>
<div class="sect3">
<h4 id="truethe-dataio-node"><a class="anchor" href="#truethe-dataio-node"></a>3.3.6. The <em>dataIO</em> node</h4>
<div class="paragraph">
<p><code>/3worlds/<strong>dataIO</strong></code> {1..*}</p>
</div>
<div class="paragraph">
<p>This node and its sub-tree contains links to external data sources (usually files) required by a simulation experiment, either for data input or output. Most of its nodes have cross-references to nodes of the <code><strong>ecology</strong></code> sub-tree. The multiplicity allows users to organise their data sets into meaningful units.</p>
</div>
</div>
<div class="sect3">
<h4 id="truethe-experiment-node"><a class="anchor" href="#truethe-experiment-node"></a>3.3.7. The <em>experiment</em> node</h4>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This part is still under construction
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>/3worlds/<strong>experiment</strong>:&lt;<span class="underline"><em>name</em></span>&gt;</code> {1..*}</p>
</div>
<div class="paragraph">
<p>This node and its sub-tree describe the experimental design to run using a given <em>model</em> and external data sets. Typically, il will tell <code>ModelRunner</code> how many simulations should be run, possibly varying some parameters of the model according to some plan. The name is used to differentiate simulation experiments in a meaningful way. <strong>TODO[It will appear in output directory names ?]</strong>.</p>
</div>
<div class="paragraph">
<p>The <code><strong>experiment</strong></code> node must have a cross-reference edge labelled <code><strong>baseLine</strong></code> {1}  to an <code><strong>ecology</strong></code> node. The model configuration contained in this <code><strong>ecology</strong></code> sub-tree will be used as the reference, "base line" simulation in the experiment - similar to a control treatment in a real-world experiment.</p>
</div>
<div class="paragraph">
<p>The default, simplest, simulation experiment is just to run a single simulation of the baseLine model.</p>
</div>
</div>
<div class="sect3">
<h4 id="truethe-userinterface-node"><a class="anchor" href="#truethe-userinterface-node"></a>3.3.8. The <em>userInterface</em> node</h4>
<div class="paragraph">
<p><code>/3worlds/<strong>userInterface</strong>:&lt;<em>name</em>&gt;</code> {1}</p>
</div>
<div class="paragraph">
<p>This node and its sub-tree specifies the look of the <code>ModelRunner</code> user interface. <code>ModelRunner</code> is highly configurable and can show many graphs during a simulation run, for example as help when debugging a new model; or only show a progress bar to improve computing performance when running a big simulation experiment.</p>
</div>
</div>
<div class="sect3">
<h4 id="truethe-hardware-node"><a class="anchor" href="#truethe-hardware-node"></a>3.3.9. The <em>hardware</em> node</h4>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This part is still under construction. The default settings should be used.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><code>/3worlds/<strong>hardware</strong>:&lt;<span class="underline"><em>name</em></span>&gt;</code> {1..*}</p>
</div>
<div class="paragraph">
<p>This node and its sub-tree specifies how the experiment should be distributed on available harware. <strong>At the time of writing, only deployment to a single computer can be done</strong>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="truedeveloping-and-testing-model-code"><a class="anchor" href="#truedeveloping-and-testing-model-code"></a>3.4. Developing and testing model code</h3>
<div class="paragraph">
<p>This section gives general rules to follow to successfully edit the generated <code>TwFunction</code>-descendant classes in order for your model to behave as you wish. Section <a href="#truesetting_up_a_java_development_environment_for_the_user_code">Setting up a user coding environment</a> describes how to link your ModelMaker session with an eclipse development enviromnent where you can edit the generated code. Section <a href="#truefunction">Function</a> describes all the options you can setup in <code>ModelMaker</code> to specify your function.</p>
</div>
<div class="paragraph">
<p>All the generated function classes look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package system1;

import au.edu.anu.rscs.aot.collections.tables.*;
import au.edu.anu.twcore.ecosystem.runtime.system.SystemComponent;
import au.edu.anu.twcore.ecosystem.runtime.biology.ChangeStateFunction;

/*
[... some big comment...]
* Class Function1
* Model "system1" -  - Mon Sep 23 09:05:33 CEST 2019
* CAUTION: Edit this template but do not change class declaration.
*/

public class Function1 extends ChangeStateFunction {

	@Override
	public void changeState(double t, double dt, SystemComponent focal) {
		// INSERT YOUR CODE HERE
	}

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, "<strong>system1</strong>" was the name given to the <code>system</code> node, while "<strong>Function1</strong>" was the name given to the <code>function</code> node. The <code>type</code> property set for the <code>function</code> was "<strong>ChangeState</strong>", as shown by the generated code. Other function types would have caused the generation of different methods in the class.</p>
</div>
<div class="sect3">
<h4 id="truegeneric-method-arguments"><a class="anchor" href="#truegeneric-method-arguments"></a>3.4.1. generic method arguments</h4>
<div class="paragraph">
<p>All generated methods share the following arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the first and second argument are <em>the current time</em> <em><strong>t</strong></em> and <em>current time step <strong>dt</strong></em>, passed by the simulator as double values in units of the <code>timeModel</code> of the parent <code>process</code> of the <code>function</code>.</p>
</li>
<li>
<p>For all function types which process applies to categories (<code>appliesTo &#8594;  category</code>), i.e. <code>ChangeCategoryDecision</code>, <code>ChangeState</code>, <code>DeleteDecision</code>, <code>CreateOtherDecision</code>, there is an additional argument, the system component which will be affected by the computations, called <em>focal</em>.</p>
</li>
<li>
<p>For all function types which process applies to relations (<code>appliesTo &#8594;  relationType</code>), i.e. <code>ChangeOtherCategoryDecision</code>, <code>ChangeOtherState</code>, <code>DeleteOtherDecision</code>, <code>ChangeRelationState</code>, <code>MaintainRelationDecision</code>, and for <code>RelateToDecision</code>, there  is another additional argument, a second system component, the one at the other end of the relation starting from <em>focal</em>, called <em>other</em>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="truegeneric-method-fields"><a class="anchor" href="#truegeneric-method-fields"></a>3.4.2. generic method fields</h4>
<div class="paragraph">
<p>In addition to these arguments, every function class has a protected field called <code>localContext</code> that contain contextual data that may be used in computations. The local context data consist in:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>ecosystem</em>-level data, i.e. ecosystem population data (= number [source,]</p>
<div class="listingblock">
<div class="content">
<pre>focalContext.ecosystemPopulationData
focalContext.ecosystemName</pre>
</div>
</div>
</li>
<li>
<p><em>life cycle</em>-level data, i.e. life cycle parameters, population data, and name:</p>
<div class="listingblock">
<div class="content">
<pre>focalContext.lifeCycleParameters
focalContext.lifeCyclePopulationData
focalContext.lifeCycleName</pre>
</div>
</div>
</li>
<li>
<p><em>group</em>-level data, i.e. group parameters, population data, and name. A group represents here components sharing the same categories and same parameter set (eg <em>species</em> characteristics for living organisms).</p>
<div class="listingblock">
<div class="content">
<pre>focalContext.groupParameters
focalContext.groupPopulationData
focalContext.groupCycleName</pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>PopulationData</code> has 3 accessible fields: <code>count</code>, <code>nremoved</code> and <code>nAdded</code>.</p>
</div>
<div class="paragraph">
<p><strong>TODO</strong> update this</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>changeState(&#8230;&#8203;)</code> method of the <code>ChangeState</code> and <code>ChangeRelationState</code> function types, and the <code>changeOtherState(&#8230;&#8203;)</code> method of the <code>ChangeOtherState</code> function type,  are expected to compute changes in state variables of the <em>focal</em> component or relation <strong>[NB: this is not yet implemented for relations]</strong>, or the <em>other</em> component in the case of the <code>ChangeOtherState</code> function. The state variables are found in <code>focal.currentState()</code>, a read-only set of values, and new values may be computed into <code>focal.nextState()</code>.</p>
</li>
<li>
<p>The <code>delete(&#8230;&#8203;)</code> method of the <code>DeleteDecision</code> and <code>DeleteOtherDecision</code> must return a <code>boolean</code> value. If <code>true</code> is returned, this will trigger the removal of the <em>focal</em> (for <code>DeleteDecision</code>) or <em>other</em> component (for <code>DeleteOtherDecision</code>).</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
In all <code>&#8230;&#8203;Decision</code> functions except <code>CreateOtherDecision</code>, a helper method called <code>decide(double proba)</code> is available. This method will return true with probability <code>proba</code> and can be used to return a boolean result based on a probability computation. This method uses the in-built <a href="#a">random stream facility</a> of 3Worlds.
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>nNew(&#8230;&#8203;)</code> method of the <code>CreateOtherDecision</code> function takes an extra argument called <code>newType</code>, which is the category name of the newly created component, as per the life cycle. <code>nNew(&#8230;&#8203;)</code> returns a number of new components to create as a decimal number (<code>double</code>): the <em>integral part</em> directly translates into a number of new components, while the <em>decimal part</em> is used as a probability of an extra new component. This way, very low fecundity probabilities can be simulated.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If there are &gt;1 possible descendant categories, the <code>nNew(&#8230;&#8203;)</code> method will be called as many times, with the <code>newType</code> parameter changing accordingly. The <code>nNew(&#8230;&#8203;)</code> method must be prepared to handle multiple choices in such case (for example with a <code>switch</code> statement).
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>changeCategory(&#8230;&#8203;)</code> method of the <code>ChangeCategoryDecision</code> and <code>ChangeOtherCategoryDecision</code> function types returns a category name (<code>String</code>), that of the new recruit. This name must be consistent with the life cycle information. After the function is executed, the  <em>focal</em> (for <code>ChangeCategoryDecision</code>) or the <em>other</em> (for <code>ChangeOtherCategoryDecision</code>) component is recruited to its new category.</p>
</li>
<li>
<p>The <code>maintainRelation(&#8230;&#8203;)</code> method of the <code>MaintainRelationDecision</code> and the <code>relate(&#8230;&#8203;)</code> method of the <code>RelateToDecision</code> both return a <code>boolean</code> value. If <code>true</code> is returned, the relation is maintained/set between the two components, otherwise it is removed/not set.<strong>[TODO: a lot to add when indexers come in]</strong></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="truefeeding-the-model-with-data"><a class="anchor" href="#truefeeding-the-model-with-data"></a>3.5. Feeding the model with data</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="truemodelrunner-reference-running-a-simulation-experiment"><a class="anchor" href="#truemodelrunner-reference-running-a-simulation-experiment"></a>4. ModelRunner reference: running a simulation experiment</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="truegeneral-concepts"><a class="anchor" href="#truegeneral-concepts"></a>4.1. General concepts</h3>
<div class="paragraph">
<p><strong>TODO</strong></p>
</div>
</div>
<div class="sect2">
<h3 id="trueusing-modelrunner-software-interface-and-functioning"><a class="anchor" href="#trueusing-modelrunner-software-interface-and-functioning"></a>4.2. Using ModelRunner: software interface and functioning</h3>
<div class="paragraph">
<p><strong>TODO</strong></p>
</div>
</div>
<div class="sect2">
<h3 id="truegetting-output-from-a-simulation-experiment"><a class="anchor" href="#truegetting-output-from-a-simulation-experiment"></a>4.3. Getting output from a simulation experiment</h3>
<div class="paragraph">
<p><strong>TODO</strong></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="truesample-models-and-tutorials"><a class="anchor" href="#truesample-models-and-tutorials"></a>5. Sample models and tutorials</h2>
<div class="sectionbody">

</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 1.2<br>
Last updated 2021-02-10 17:46:41 +0100
</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>